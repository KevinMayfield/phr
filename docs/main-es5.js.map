{"version":3,"sources":["webpack:///src/app/tracking/tracking.component.ts","webpack:///src/app/tracking/tracking.component.html","webpack:///src/app/prescription-order-detail/prescription-order-detail.component.ts","webpack:///src/app/prescription-order-detail/prescription-order-detail.component.html","webpack:///src/app/orders/orders.component.ts","webpack:///src/app/orders/orders.component.html","webpack:///src/app/service/auth.service.ts","webpack:///src/app/eps-orders/prescription-orders.component.ts","webpack:///src/app/eps-orders/prescription-orders.component.html","webpack:///src/environments/environment.ts","webpack:///src/app/callback/callback.component.ts","webpack:///src/app/callback/callback.component.html","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/medications/medications.component.ts","webpack:///src/app/medications/medications.component.html","webpack:///src/app/service/FhirService.ts","webpack:///src/app/diary-entry/diary-entry.component.ts","webpack:///src/app/diary-entry/diary-entry.component.html","webpack:///src/app/service/auth-guard.ts","webpack:///src/app/service/nhsd.service.ts","webpack:///src/app/gp-diary/gp-diary.component.ts","webpack:///src/app/gp-diary/gp-diary.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/login/login.component.ts","webpack:///src/app/login/login.component.html","webpack:///src/app/main/main.component.ts","webpack:///src/app/main/main.component.html","webpack:///src/app/gp-prescriptions/prescription-refill.component.ts","webpack:///src/app/gp-prescriptions/prescription-refill.component.html","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["TrackingComponent","closed","basicFlavoredMarkdown","event","emit","ok","selector","templateUrl","styleUrls","PrescriptionOrderDetailComponent","_dialogService","nhsd","_viewContainerRef","task","displayedColumns","displayedDispenseColumns","datepipe","prescription","dispense","dataSource","dispenseDataSource","medicationRequest","subscribe","push","medicationDispense","console","log","nTask","resource","input","undefined","length","taskInput","valueReference","reference","display","getMedicationRequest","getMedicationDispense","OrdersComponent","dialog","disabled","error","operationOutcome","issue","details","text","msg","matDialogRef","openAlert","title","message","afterClosed","result","files","FileList","File","file","fileReader","FileReader","onloadend","e","bundle","JSON","parse","convertToTransaction","readAsText","selectEvent","Oauth2token","AuthService","router","http","accessToken","tokenChange","auth","authCode","bearerToken","headers","url","oauth2","token","urlParams","URLSearchParams","grant_type","append","document","baseURI","postAny","toString","smartToken","setAccessToken","body","httpHeaders","post","date","Date","expires_at","Math","round","valueOf","expires_in","localStorage","setItem","stringify","access_token","getAccessToken","getItem","helper","isTokenExpired","removeItem","decoded","hasOwnProperty","setUTCSeconds","offsetSeconds","getTokenExpirationDate","providedIn","PrescriptionOrdersComponent","hapi","data","queryTasks","taskChange","getTasks","sort","dialogConfig","disableClose","autoFocus","id","open","openDraggable","component","dragHandleSelectors","config","panelClass","dragRefSubject","componentInstance","close","environment","production","cookie_domain","logonUrl","virtually","virtuallyt","hapibase","firelybase","CallbackComponent","route","navigateByUrl","queryParamMap","params","code","get","performGetAccessToken","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","keys","webpackContextKeys","Object","resolve","module","exports","AppComponent","AppModule","provide","useValue","forRoot","declarations","imports","entryComponents","providers","bootstrap","MedicationsComponent","FhirService","medicationRequests","medicationChange","tasks","getHeaders","entry","taskUrn","type","resourceType","identifier","system","value","fullUrl","extension","valueString","status","subject","encounter","authored","toISOString","author","item","linkId","answer","taskEntry","DragRef","DiaryEntryComponent","dialogService","fhir","formElements","name","hint","label","Select","selections","required","Text","min","setHours","reasonCode","coding","note","annotation","diaryForm","form","dateInput","newTask","intent","requester","authoredOn","valueLabelSelect","expDate","description","postTask","AuthGuard","NhsdService","newBundle","prescriptionorder","practitionerRole","medicationHeader","eventCoding","authorizingPrescription","ident","groupIdentifier","dispenseRequest","performer","owner","medicationCodeableConcept","getIdentifier","request","method","practitioner","GpDiaryComponent","diary","routes","path","canActivate","children","AppRoutingModule","LoginComponent","callback","MainComponent","media","opened","PrescriptionRefillComponent","source","queryMedicationRequests","getMedicationRequests","sortChange","transform","bootstrapModule","err","webpackEmptyAsyncContext","Promise","then"],"mappings":"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","file":"main-es5.js","sourcesContent":["import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-tracking',\r\n  templateUrl: './tracking.component.html',\r\n  styleUrls: ['./tracking.component.scss']\r\n})\r\nexport class TrackingComponent implements OnInit {\r\n\r\n  @Output() closed: EventEmitter<void> = new EventEmitter();\r\n\r\n  basicFlavoredMarkdown: string = `\r\n   ## GP FHIR MedicationRequests\r\n\r\n   Some GP suppliers have patient facing services with the concept of tracking. This is centred around the FP10 and includes:\r\n   - Patient asking for a refill\r\n   - GP authorizing refill\r\n   - Patient is informed the FP10 is ready for collection.\r\n   \r\n   ## Pharmacy FHIR MedicationDispense\r\n   \r\n   This is centred around the delivery of the medication and includes:\r\n   - medication is ready for collection\r\n   - medication has been dispatched.\r\n   \r\n   ## Notes\r\n   \r\n   In both cases these medication fulfilment tasks appear to be decoupled from the clinical medicinal FHIR resources. \r\n   \r\n   They are seperate atomic actions.\r\n `;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  ok(event: any): void {\r\n      this.closed.emit();\r\n  }\r\n\r\n}\r\n","<td-window-dialog\r\n        [title]=\"'Tracking (FHIR Task)'\"\r\n        [toolbarColor]=\"'accent'\"\r\n        (close)=\"closed.emit()\"\r\n>\r\n    <mat-card>\r\n        <td-flavored-markdown>{{ basicFlavoredMarkdown }}</td-flavored-markdown>\r\n        <mat-card-actions>\r\n            <button mat-raised-button class=\"text-upper\" (click)=\"closed.emit()\">\r\n                Cancel\r\n            </button>\r\n            <button mat-raised-button class=\"text-upper\" (click)=\"ok($event)\">\r\n                Ok\r\n            </button>\r\n        </mat-card-actions>\r\n    </mat-card>\r\n</td-window-dialog>\r\n","import {Component, Inject, OnInit, ViewContainerRef} from '@angular/core';\r\nimport {MatTableDataSource} from \"@angular/material/table\";\r\nimport {TdDialogService} from \"@covalent/core/dialogs\";\r\nimport {MedicationDispense, MedicationRequest, Task} from 'fhir/r4';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {NhsdService} from \"../service/nhsd.service\";\r\nimport {DatePipe} from \"@angular/common\";\r\n\r\n@Component({\r\n  selector: 'app-prescription-order-detail',\r\n  templateUrl: './prescription-order-detail.component.html',\r\n  styleUrls: ['./prescription-order-detail.component.scss']\r\n})\r\nexport class PrescriptionOrderDetailComponent implements OnInit {\r\n\r\n\r\n    displayedColumns: string[] = ['authored', 'name', 'dosage', 'quantity', 'unit'];\r\n\r\n    displayedDispenseColumns: string[] = ['prepared', 'performer', 'name', 'quantity', 'unit'];\r\n\r\n    dataSource : any;\r\n    dispenseDataSource : any;\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n\r\n    prescription: MedicationRequest[] =  [\r\n    ]\r\n\r\n    dispense: MedicationDispense[] =  [\r\n\r\n                ]\r\n    closed: any;\r\n\r\n  constructor(private _dialogService: TdDialogService,\r\n              private nhsd: NhsdService,\r\n              private _viewContainerRef: ViewContainerRef,\r\n              @Inject(MAT_DIALOG_DATA) public task: any\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n      this.dataSource = new MatTableDataSource<any>(this.prescription);\r\n      this.dispenseDataSource = new MatTableDataSource<any>(this.dispense);\r\n\r\n      this.nhsd.medicationRequest.subscribe((medicationRequest: MedicationRequest) => {\r\n\r\n          this.prescription.push(medicationRequest);\r\n          this.dataSource = new MatTableDataSource<any>(this.prescription);\r\n      });\r\n      this.nhsd.medicationDispense.subscribe( (medicationDispense: MedicationDispense) => {\r\n          console.log(medicationDispense);\r\n          this.dispense.push(medicationDispense);\r\n          this.dispenseDataSource= new MatTableDataSource<any>(this.dispense);\r\n      })\r\n      const nTask: Task = this.task.resource;\r\n      if (nTask.input !== undefined && nTask.input.length>0) {\r\n          for (const taskInput of nTask.input) {\r\n              if (taskInput.valueReference !== undefined && taskInput.valueReference.reference !== undefined) {\r\n                  console.log(taskInput.valueReference.display)\r\n                  this.nhsd.getMedicationRequest(taskInput.valueReference.reference);\r\n                  this.nhsd.getMedicationDispense(taskInput.valueReference.reference);\r\n              }\r\n          }\r\n      }\r\n  }\r\n\r\n}\r\n","\r\n<mat-dialog-content>\r\n    <h2>Medication Requests</h2>\r\n<table mat-table [dataSource]=\"dataSource\" >\r\n\r\n        <ng-container matColumnDef=\"authored\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n    <ng-container matColumnDef=\"dosage\">\r\n        <th mat-header-cell *matHeaderCellDef [style.width.px]=\"300\"> Dose </th>\r\n        <td mat-cell *matCellDef=\"let element\"> {{element.dosageInstruction[0].text}} </td>\r\n    </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"300\"> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.medicationCodeableConcept.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n\r\n\r\n    <h2>Dispensing History</h2>\r\n\r\n    <table mat-table [dataSource]=\"dispenseDataSource\">\r\n\r\n        <ng-container matColumnDef=\"prepared\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"140\"> Prepared </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.whenPrepared, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"performer\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.performer\" let-i=\"index\" >\r\n                        <li>{{item.actor.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.medicationCodeableConcept.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.quantity.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"cancel_dispense\">\r\n            <th mat-header-cell *matHeaderCellDef> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button mat-icon-button matTooltip=\"This is the ETPWithdrawal interaction. Does not map well to FHIR \"><mat-icon>assignment_return</mat-icon>Cancel Dispense</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedDispenseColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedDispenseColumns;\"></tr>\r\n    </table>\r\n</mat-dialog-content>\r\n<mat-dialog-actions>\r\n    <button mat-button mat-dialog-close>Cancel</button>\r\n    <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->\r\n</mat-dialog-actions>\r\n\r\n\r\n\r\n\r\n","import {Component, EventEmitter, OnInit} from '@angular/core';\r\nimport {Bundle, OperationOutcome} from 'fhir/r4';\r\nimport {NhsdService} from '../service/nhsd.service';\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {TdDialogService} from \"@covalent/core/dialogs\";\r\n\r\n\r\n@Component({\r\n  selector: 'app-orders',\r\n  templateUrl: './orders.component.html',\r\n  styleUrls: ['./orders.component.scss']\r\n})\r\nexport class OrdersComponent implements OnInit {\r\n\r\n  files: File | FileList | undefined;\r\n  disabled = false;\r\n\r\n  constructor(\r\n      private nhsd: NhsdService,\r\n      private dialog: MatDialog,\r\n      private _dialogService: TdDialogService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.nhsd.error.subscribe(\r\n        (error: OperationOutcome) => {\r\n          console.log(error);\r\n           const operationOutcome = error as OperationOutcome;\r\n           console.log(operationOutcome.issue[0].details?.text);\r\n          // @ts-ignore\r\n            const msg :string = operationOutcome.issue[0].details?.text;\r\n          // @ts-ignore\r\n            const matDialogRef = this._dialogService.openAlert({\r\n            title: 'Error',\r\n            message: msg\r\n          });\r\n          matDialogRef.afterClosed().subscribe(result => {\r\n            //console.log(matDialogRef.componentInstance.value);\r\n          });\r\n        }\r\n    )\r\n  }\r\n\r\n  // https://stackoverflow.com/questions/40214772/file-upload-in-angular\r\n\r\n  selectEvent(files: FileList | File): void {\r\n    if (files instanceof FileList) {\r\n      console.log('is filelist');\r\n    } else if (files instanceof File) {\r\n      console.log('is file');\r\n      const file: File = files;\r\n      const fileReader: FileReader = new FileReader();\r\n      // tslint:disable-next-line:only-arrow-functions typedef\r\n      fileReader.onloadend = (e) => {\r\n        if (typeof fileReader.result === 'string') {\r\n          const bundle = JSON.parse(fileReader.result) as Bundle;\r\n          this.nhsd.convertToTransaction(bundle);\r\n        }\r\n      };\r\n      fileReader.readAsText(file);\r\n    } else {\r\n      console.log('not a file type');\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<mat-card>\r\n   <!-- <h2>COVID-19 Vaccinations History</h2>\r\n    <br/> -->\r\n\r\n\r\n    <app-prescription-orders></app-prescription-orders>\r\n    <app-gp-diary></app-gp-diary>\r\n\r\n\r\n    <br />\r\n    <div>\r\n\r\n        <td-file-input [(ngModel)]=\"files\" color=\"primary\" (select)=\"selectEvent($event)\"\r\n                       accept=\".json,.xml\">\r\n            <mat-icon>attach_file</mat-icon><span>Choose a FHIR Bundle file...</span>\r\n        </td-file-input>\r\n\r\n    </div>\r\n</mat-card>\r\n","\r\n\r\nimport {environment} from '../../environments/environment';\r\n\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {EventEmitter, Injectable} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {JwtHelperService} from '@auth0/angular-jwt';\r\n\r\n\r\n\r\nclass Oauth2token {\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n    private smartToken: Oauth2token | undefined;\r\n\r\n    private accessToken = undefined;\r\n\r\n    tokenChange: EventEmitter<Oauth2token> = new EventEmitter();\r\n\r\n   public auth = false;\r\n\r\n  constructor(\r\n             private router: Router,\r\n             private http: HttpClient\r\n              ) {\r\n\r\n  }\r\n\r\n    performGetAccessToken(authCode: string | null): any {\r\n\r\n\r\n    // https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-combined-authentication-and-authorisation\r\n\r\n    const bearerToken = '';\r\n    // 'Basic ' + btoa(environment.oauth2.client_id + ':' + environment.oauth2.client_secret);\r\n    const headers = new HttpHeaders( { 'Content-Type': 'application/x-www-form-urlencoded'});\r\n\r\n    const url = environment.oauth2.token;\r\n\r\n\r\n    const urlParams = new URLSearchParams(\r\n            { grant_type: 'authorization_code'});\r\n\r\n    // urlParams.append('client_id', environment.oauth2.client_id),\r\n    // urlParams.append(  'client_secret', environment.oauth2.client_secret);\r\n    urlParams.append(  'redirect_uri', document.baseURI + 'callback');\r\n    if (typeof authCode === 'string') {\r\n        urlParams.append('code', authCode);\r\n    }\r\n\r\n    this.postAny(url, urlParams.toString(),  headers  ).subscribe( (token: any) => {\r\n        // console.log(response);\r\n        this.smartToken = token;\r\n        console.log('OAuth2Token : ' + token);\r\n        this.setAccessToken(token);\r\n\r\n        }\r\n      , (error: any) => {\r\n        console.log(error);\r\n      }\r\n      , () => {\r\n        // Emit event\r\n      }\r\n    );\r\n  }\r\n\r\n    // tslint:disable-next-line:typedef\r\n    public postAny(url: string | null, body: string, httpHeaders: HttpHeaders) {\r\n        return this.http.post<any>(url as string, body, {headers: httpHeaders});\r\n    }\r\n\r\n    public setAccessToken(token: { expires_at: any; expires_in: number; access_token: any; }): any {\r\n        // tslint:disable-next-line:new-parens\r\n        const date = new Date;\r\n        // Create an expires at ..... don't know when we got the token\r\n        token.expires_at = Math.round((new Date().valueOf()) / 1000) + token.expires_in;\r\n        localStorage.setItem('nhsdToken', JSON.stringify(token));\r\n        this.accessToken = token.access_token;\r\n        this.tokenChange.emit(token);\r\n    }\r\n    public hasAccessToken(): boolean {\r\n        return this.getAccessToken() !== undefined;\r\n    }\r\n\r\n    public getAccessToken(): any {\r\n        if (localStorage.getItem('nhsdToken') !== undefined) {\r\n            const token: any = JSON.parse(localStorage.getItem('nhsdToken') as any);\r\n            const helper = new JwtHelperService();\r\n            if (this.isTokenExpired(token)) {\r\n\r\n                console.log('withings Token expired');\r\n                this.accessToken = undefined;\r\n                //  this.getRefreshToken();\r\n                return undefined;\r\n            }\r\n            if (token !== undefined) {\r\n                this.accessToken = token.access_token;\r\n                return this.accessToken;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n\r\n    private deleteAccessToken(): any {\r\n        this.accessToken = undefined;\r\n        localStorage.removeItem('nhsdToken');\r\n    }\r\n\r\n    private getTokenExpirationDate(\r\n        decoded: any\r\n    ): Date | null {\r\n\r\n        if (!decoded || !decoded.hasOwnProperty('expires_at')) {\r\n            // Invalid format\r\n            localStorage.removeItem('nhsdToken');\r\n            return null;\r\n        }\r\n\r\n        const date = new Date(0);\r\n        date.setUTCSeconds(decoded.expires_at);\r\n\r\n        return date;\r\n    }\r\n\r\n    private isTokenExpired(\r\n        token: any,\r\n        offsetSeconds?: number\r\n    ): boolean {\r\n        if (!token || token === '') {\r\n            return true;\r\n        }\r\n        const date = this.getTokenExpirationDate(token);\r\n        offsetSeconds = offsetSeconds || 0;\r\n\r\n        console.log('nhsd token expiry date ' + date);\r\n        if (date === null) {\r\n            return false;\r\n        }\r\n        return !(date.valueOf() > new Date().valueOf() + offsetSeconds * 1000);\r\n    }\r\n}\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {MatDialog,MatDialogConfig} from '@angular/material/dialog';\r\nimport {NhsdService} from '../service/nhsd.service';\r\nimport {Task} from 'fhir/r4';\r\nimport {DatePipe} from \"@angular/common\";\r\nimport {PrescriptionOrderDetailComponent} from \"../prescription-order-detail/prescription-order-detail.component\";\r\nimport {IDraggableRefs, TdDialogService} from \"@covalent/core/dialogs\";\r\nimport {TrackingComponent} from \"../tracking/tracking.component\";\r\nimport {MatSort} from \"@angular/material/sort\";\r\n\r\n@Component({\r\n  selector: 'app-prescription-orders',\r\n  templateUrl: './prescription-orders.component.html',\r\n  styleUrls: ['./prescription-orders.component.scss']\r\n})\r\nexport class PrescriptionOrdersComponent implements OnInit {\r\n\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n\r\n    displayedColumns: string[] = ['authoredOn', 'status', 'requester', 'pharmacy', 'medications',\r\n        'order_number',  'view_order', 'track_order'];\r\n\r\n    dataSource: any;\r\n    data: Task[] = [];\r\n    @ViewChild(MatSort) sort: MatSort | undefined;\r\n\r\n\r\n  constructor(private hapi: NhsdService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n     this.dataSource = new MatTableDataSource <any>(this.data);\r\n     this.hapi.queryTasks();\r\n     this.hapi.taskChange.subscribe(() => {\r\n         this.data = this.hapi.getTasks();\r\n         this.dataSource = new MatTableDataSource(this.data);\r\n         this.dataSource.sort = this.sort;\r\n      });\r\n  }\r\n\r\n  view(resource: any): void {\r\n      const dialogConfig = new MatDialogConfig();\r\n\r\n      dialogConfig.disableClose = true;\r\n      dialogConfig.autoFocus = true;\r\n      dialogConfig.data = {\r\n          id: 1,\r\n          resource: resource\r\n      };\r\n      this.dialog.open( PrescriptionOrderDetailComponent, dialogConfig);\r\n\r\n  }\r\n\r\n    tracking(event: any): void {\r\n        const {\r\n            matDialogRef,\r\n            dragRefSubject,\r\n        }: IDraggableRefs<TrackingComponent> = this._dialogService.openDraggable({\r\n            component: TrackingComponent,\r\n            dragHandleSelectors: ['mat-toolbar'],\r\n            config: {\r\n                panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n            },\r\n        });\r\n\r\n        matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n    }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header><h2>EPS Prescription Orders (FHIR Task)</h2>\r\n\r\n    </mat-card-header>\r\n    <table mat-table   matSort\r\n           matSortActive=\"authoredOn\" matSortDirection=\"desc\"\r\n           [dataSource]=\"dataSource\" width=\"100%\" >\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"80\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"medications\">\r\n            <th mat-header-cell *matHeaderCellDef> Medications </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.input\" let-i=\"index\" >\r\n                        <li>{{item.valueReference.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"pharmacy\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.owner?.identifier.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"requester\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Requester </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.requester.display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authoredOn\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"order_number\">\r\n            <th mat-header-cell *matHeaderCellDef > Order No. </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.identifier[0].value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"return_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"warn\" *ngIf=\"element.status == 'accepted'\" mat-icon-button><mat-icon>remove_shopping_cart</mat-icon>Cancel</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"view_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Details  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button matTooltip=\"Prescription Order Details\" (click)=\"view(element)\" ><mat-icon>inventory</mat-icon></button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Tracking  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" matTooltip=\"Tracking\" mat-icon-button ><mat-icon (click)=\"tracking($event)\"> local_shipping</mat-icon></button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n</mat-card>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  oauth2 : {\r\n    token : 'https://int.api.service.nhs.uk/oauth2-no-smartcard/token',\r\n    auth : 'https://int.api.service.nhs.uk/oauth2-no-smartcard/authorize',\r\n    cookie_domain : 'localhost',\r\n    logonUrl: 'http://localhost:4200/ccri-logon'\r\n  },\r\n  virtually: 'https://test-emis.virtually.healthcare/R4',\r\n  virtuallyt: 'http://127.0.0.1:8180/R4',\r\n  nhsd: 'https://server.fire.ly/r4',\r\n  hapibase: 'http://hapi.fhir.org/baseR4',\r\n  firelybase : 'https://server.fire.ly/r4'\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {AuthService} from '../service/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-callback',\r\n  templateUrl: './callback.component.html',\r\n  styleUrls: ['./callback.component.css']\r\n})\r\nexport class CallbackComponent implements OnInit {\r\n\r\n  constructor(private route: ActivatedRoute,\r\n              private auth: AuthService,\r\n              private router: Router) { }\r\n\r\n  private authCode = '' ;\r\n\r\n  subOAuth2: any;\r\n\r\n  // tslint:disable-next-line:typedef\r\n  ngOnInit() {\r\n\r\n    this.auth.tokenChange.subscribe(\r\n        () => {\r\n          this.router.navigateByUrl('/');\r\n        }\r\n    );\r\n    this.route.queryParamMap.subscribe(params => {\r\n      console.log(params);\r\n      const code = params.get('code');\r\n      // var state = params.get('state');\r\n      this.auth.performGetAccessToken(code);\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","callback done\r\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn-bd\": \"loYQ\",\n\t\"./bn-bd.js\": \"loYQ\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-mx\": \"tbfe\",\n\t\"./es-mx.js\": \"tbfe\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'phr';\r\n}\r\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport {CovalentDynamicFormsModule} from \"@covalent/dynamic-forms\";\r\nimport {CovalentLayoutModule} from \"@covalent/core/layout\";\r\nimport {CovalentStepsModule} from \"@covalent/core/steps\";\r\nimport {CovalentHighlightModule} from \"@covalent/highlight\";\r\nimport {CovalentMarkdownModule} from \"@covalent/markdown\";\r\nimport {CovalentBaseEchartsModule} from \"@covalent/echarts/base\";\r\nimport {CovalentHttpModule} from \"@covalent/http\";\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport {MainComponent} from \"./main/main.component\";\r\nimport {MatChipsModule} from '@angular/material/chips';\r\nimport {MatTooltipModule} from '@angular/material/tooltip';\r\nimport {MatTableModule} from '@angular/material/table';\r\nimport {CovalentDataTableModule} from \"@covalent/core/data-table\";\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatIconModule} from '@angular/material/icon';\r\nimport {MatMenuModule} from '@angular/material/menu';\r\nimport {MatCardModule} from '@angular/material/card';\r\nimport {MatList, MatListModule} from '@angular/material/list';\r\nimport {MatSortModule} from '@angular/material/sort';\r\nimport {FlexLayoutModule} from '@angular/flex-layout';\r\nimport { OrdersComponent } from './orders/orders.component';\r\nimport {PrescriptionRefillComponent} from './gp-prescriptions/prescription-refill.component';\r\nimport {PrescriptionOrderDetailComponent} from './prescription-order-detail/prescription-order-detail.component';\r\nimport {CovalentMessageModule} from '@covalent/core/message';\r\nimport {PrescriptionOrdersComponent} from './eps-orders/prescription-orders.component';\r\nimport {CallbackComponent} from './callback/callback.component';\r\nimport {AuthGuard} from './service/auth-guard';\r\nimport { LoginComponent } from './login/login.component';\r\nimport {CovalentFileModule} from \"@covalent/core/file\";\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport {GpDiaryComponent} from \"./gp-diary/gp-diary.component\";\r\nimport {CovalentDialogsModule} from \"@covalent/core/dialogs\";\r\nimport {MatDialogModule} from '@angular/material/dialog';\r\nimport { DiaryEntryComponent } from './diary-entry/diary-entry.component';\r\nimport {MatFormFieldModule} from '@angular/material/form-field';\r\nimport {MatDatepickerModule} from '@angular/material/datepicker';\r\nimport {MatMomentDateModule} from '@angular/material-moment-adapter';\r\nimport {MAT_DATE_LOCALE} from '@angular/material/core';\r\nimport { TrackingComponent } from './tracking/tracking.component';\r\nimport {CovalentFlavoredMarkdownModule} from '@covalent/flavored-markdown';\r\nimport { MedicationsComponent } from './medications/medications.component';\r\nimport {CovalentMediaModule} from \"@covalent/core/media\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MainComponent,\r\n    OrdersComponent,\r\n      PrescriptionRefillComponent,\r\n      PrescriptionOrdersComponent,\r\n      GpDiaryComponent,\r\n      CallbackComponent,\r\n      LoginComponent,\r\n      PrescriptionOrderDetailComponent,\r\n      DiaryEntryComponent,\r\n      TrackingComponent,\r\n      MedicationsComponent\r\n  ],\r\n    imports: [\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        FlexLayoutModule,\r\n        BrowserAnimationsModule,\r\n\r\n        CovalentLayoutModule,\r\n        CovalentStepsModule,\r\n        // (optional) Additional Covalent Modules imports\r\n        CovalentHttpModule.forRoot(),\r\n        CovalentHighlightModule,\r\n        CovalentMarkdownModule,\r\n        CovalentDynamicFormsModule,\r\n        CovalentBaseEchartsModule,\r\n        CovalentMessageModule,\r\n        CovalentDialogsModule,\r\n        CovalentFlavoredMarkdownModule,\r\n        CovalentMediaModule,\r\n\r\n        MatIconModule,\r\n        MatButtonModule,\r\n        CovalentDataTableModule,\r\n        MatMenuModule,\r\n        MatListModule,\r\n        MatCardModule,\r\n        MatTableModule,\r\n        MatTooltipModule,\r\n        MatChipsModule,\r\n        CovalentFileModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        MatDialogModule,\r\n        MatFormFieldModule,\r\n        MatDatepickerModule,\r\n        MatMomentDateModule,\r\n        MatSortModule\r\n\r\n    ],\r\n    entryComponents: [\r\n        PrescriptionOrderDetailComponent\r\n    ],\r\n  providers: [\r\n      AuthGuard,\r\n      {provide: MAT_DATE_LOCALE\r\n          , useValue: 'en-GB'},\r\n\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\n// @ts-ignore\r\nexport class AppModule {\r\n    // nothing\r\n}","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-medications',\r\n  templateUrl: './medications.component.html',\r\n  styleUrls: ['./medications.component.scss']\r\n})\r\nexport class MedicationsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <app-prescription-refill source=\"EPS\"></app-prescription-refill>\r\n    <app-prescription-refill source=\"GP\"></app-prescription-refill>\r\n</mat-card>\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {AuthService} from './auth.service';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {Bundle, BundleEntry, MedicationRequest, Task} from 'fhir/r4';\r\nimport {environment} from '../../environments/environment';\r\nimport {v4 as uuidv4} from 'uuid';\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class FhirService {\r\n\r\n    private medicationRequests: MedicationRequest[] = [];\r\n\r\n\r\n    medicationChange: EventEmitter<any> = new EventEmitter();\r\n    constructor(private http: HttpClient,\r\n                private auth: AuthService) {\r\n    }\r\n\r\n    taskChange: EventEmitter<any> = new EventEmitter();\r\n    private tasks: Task[] = [];\r\n\r\n    public getTasks(): Task[] {\r\n        return this.tasks;\r\n    }\r\n\r\n    public queryTasks(): any {\r\n\r\n\r\n        const headers = this.getHeaders();\r\n        // tslint:disable-next-line:typedef\r\n        this.http.get(environment.virtually + '/Task?patient=137', { headers}).subscribe(\r\n            result => {\r\n                const bundle = result as Bundle;\r\n                if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n                    console.log('Task found.');\r\n                    this.tasks = [];\r\n                    for (const entry of bundle.entry) {\r\n                        this.tasks.push(entry.resource as Task);\r\n                    }\r\n                    this.taskChange.emit({});\r\n                } else {\r\n                    console.log('Task not found.');\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    public getMedicationRequests(): MedicationRequest[] {\r\n        return this.medicationRequests;\r\n    }\r\n    public queryMedicationRequests(): any {\r\n\r\n        const headers = this.getHeaders();\r\n        // tslint:disable-next-line:typedef\r\n        this.http.get(environment.virtually + '/MedicationRequest?patient=137&date=2019-01-01', { headers}).subscribe(\r\n            result => {\r\n                const bundle = result as Bundle;\r\n                if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n                    this.medicationRequests = [];\r\n                    for (const entry of bundle.entry) {\r\n                        this.medicationRequests.push(entry.resource as MedicationRequest);\r\n                    }\r\n                    this.medicationChange.emit({});\r\n                } else {\r\n                    console.log('Medication not found.');\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    public postTask(task: Task): void {\r\n        const headers = this.getHeaders();\r\n        const taskUrn = 'urn:uuid:' + uuidv4();\r\n        const bundle: Bundle = {\r\n            type: 'message',\r\n            resourceType: 'Bundle',\r\n            identifier: {\r\n                system: 'https://tools.ietf.org/html/rfc4122',\r\n                value: uuidv4()\r\n            },\r\n            entry: [\r\n                {\r\n                    fullUrl: 'urn:uuid:' + uuidv4(),\r\n                    resource: {\r\n                        resourceType: 'QuestionnaireResponse',\r\n                        extension: [\r\n                            {\r\n                                url: 'http://fhir.virtuallyhealthcare.co.uk/Location',\r\n                                valueReference: {\r\n                                    reference: 'Location/4884'\r\n                                }\r\n                            },\r\n                            {\r\n                                url: 'http://fhir.virtuallyhealthcare.co.uk/LocationType',\r\n                                extension: [\r\n                                    {\r\n                                        url: 'ID',\r\n                                        valueString: '1672871000006114'\r\n                                    },\r\n                                    {\r\n                                        url: 'GUID',\r\n                                        valueString: '357EFD4F-7912-DE6E-13B8-D3FACED28522'\r\n                                    },\r\n                                    {\r\n                                        url: 'Name',\r\n                                        valueString: 'G.P.Surgery'\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ],\r\n                        identifier: {\r\n                            system: 'urn:uuid',\r\n                            value: uuidv4()\r\n                        },\r\n                        status: 'completed',\r\n                        subject: {\r\n                            reference: 'Patient/137'\r\n                        },\r\n                        encounter: {\r\n                            display: 'Patient Facing Application'\r\n                        },\r\n                        authored: new Date().toISOString(),\r\n                        author: {\r\n                            reference: 'Practitioner/4620'\r\n                        },\r\n                        item: [\r\n                            {\r\n                                linkId: 'task',\r\n                                item: [\r\n                                    {\r\n                                        linkId: 'task-type',\r\n                                        text: 'Task',\r\n                                        answer: [\r\n                                            {\r\n                                                valueReference: {\r\n                                                    reference: taskUrn\r\n                                                }\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            ]\r\n        };\r\n        const taskEntry: BundleEntry = {\r\n            fullUrl: taskUrn,\r\n            resource: task\r\n        };\r\n        bundle.entry?.push(taskEntry);\r\n        console.log(bundle);\r\n        this.http.post(environment.virtually + '/$process-message', JSON.stringify(bundle), { headers: this.getHeaders() }).subscribe(\r\n            (result) => {\r\n                console.log('done post to virtually');\r\n                console.log(result);\r\n            },\r\n            error => {\r\n                console.log(error.error);\r\n            }\r\n        );\r\n    }\r\n\r\n    getHeaders(): HttpHeaders {\r\n\r\n        let headers = new HttpHeaders(\r\n        );\r\n\r\n        headers = headers.append('Content-Type', 'application/fhir+json');\r\n        headers = headers.append('Accept', 'application/fhir+json');\r\n        // headers = headers.append(\"Authorization\", \"Bearer \"+this.auth.getAccessToken());\r\n        return headers;\r\n    }\r\n}\r\n","import {Component, EventEmitter, Inject, OnInit, Output, ViewChild} from '@angular/core';\r\nimport {TdDialogService} from '@covalent/core/dialogs';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {MAT_DIALOG_DATA} from '@angular/material/dialog';\r\n\r\n\r\nimport {\r\n  ITdDynamicElementConfig,\r\n  TdDynamicElement,\r\n  TdDynamicFormsComponent,\r\n  TdDynamicType\r\n} from '@covalent/dynamic-forms';\r\nimport {Task} from 'fhir/r4';\r\nimport {FhirService} from '../service/FhirService';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nclass DragRef {\r\n}\r\n\r\n@Component({\r\n  selector: 'app-diary-entry',\r\n  templateUrl: './diary-entry.component.html',\r\n  styleUrls: ['./diary-entry.component.scss']\r\n})\r\nexport class DiaryEntryComponent implements OnInit {\r\n  @Output() closed: EventEmitter<void> = new EventEmitter();\r\n\r\n  @ViewChild('diaryForm', { static: true }) diaryForm: TdDynamicFormsComponent | undefined;\r\n\r\n  formElements: ITdDynamicElementConfig[] = [\r\n\r\n    {\r\n      name: 'valueLabelSelect',\r\n      hint: 'this is a SNOMED concept (procedure codes)',\r\n      label: 'diary/task reason',\r\n      type: TdDynamicElement.Select,\r\n      selections: [\r\n        { label: 'Renewal of prescription', value: '103742009' },\r\n        { label: 'Review of medication', value: '182836005' },\r\n        { label: 'Asthma medication review', value: '394720003' }\r\n      ],\r\n      default : '103742009',\r\n      required: true,\r\n    },\r\n    {\r\n      name: 'description',\r\n      label: 'Notes',\r\n      type: TdDynamicType.Text,\r\n      default: '',\r\n      required: true\r\n    },\r\n    {\r\n      name: 'dateInput',\r\n      label: 'Select a due by date',\r\n      hint: 'this is a datepicker hint',\r\n      type: TdDynamicType.Date,\r\n      default : new Date(),\r\n      required: true,\r\n      min: new Date(2021, 11, 1).setHours(0, 0, 0, 0),\r\n    },\r\n  ];\r\n  constructor(private dialogService: TdDialogService,\r\n              @Inject(DOCUMENT) private document: any,\r\n              @Inject(MAT_DIALOG_DATA) public task: Task,\r\n              private fhir: FhirService) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.task);\r\n    if (this.task.reasonCode !== undefined && this.task.reasonCode.coding !== undefined) {\r\n      this.formElements[0].default = this.task.reasonCode.coding[0].code;\r\n    }\r\n    if (this.task.note !== undefined ) {\r\n      for (const annotation of this.task.note) {\r\n        this.formElements[1].default += annotation.text + ' ';\r\n      }\r\n    }\r\n  }\r\n\r\n  ok(event: any): void {\r\n    if (this.diaryForm !== undefined && this.diaryForm.form.value.dateInput !== undefined) {\r\n\r\n      const newTask: Task = {\r\n        resourceType: 'Task',\r\n        status: 'ready',\r\n        identifier: [\r\n          {\r\n            system: 'https://tools.ietf.org/html/rfc4122',\r\n            value: uuidv4()\r\n          }\r\n        ],\r\n        intent: 'order',\r\n        code: {\r\n          coding: [\r\n            {\r\n              system: 'http://hl7.org/fhir/CodeSystem/task-code',\r\n              code: 'fulfill',\r\n              display: 'Fulfill the focal request'\r\n            }\r\n          ]\r\n        },\r\n        for: {\r\n          reference: 'Patient/137'\r\n        },\r\n        requester: {\r\n          reference: 'Practitioner/4620'\r\n        },\r\n        authoredOn: new Date().toISOString(),\r\n      };\r\n      switch (this.diaryForm.form.value.valueLabelSelect) {\r\n        case '103742009':\r\n          newTask.reasonCode = {\r\n          coding: [\r\n            {\r\n              system: 'http://snomed.info/sct',\r\n              code: '103742009',\r\n              display: 'Renewal of prescription'\r\n            }\r\n          ]\r\n        };\r\n          break;\r\n        case '182836005':\r\n          newTask.reasonCode = {\r\n            coding: [\r\n              {\r\n                system: 'http://snomed.info/sct',\r\n                code: '182836005',\r\n                display: 'Review of medication'\r\n              }\r\n            ]\r\n          };\r\n          break;\r\n        case '394720003':\r\n          newTask.reasonCode = {\r\n            coding: [\r\n              {\r\n                system: 'http://snomed.info/sct',\r\n                code: '394720003',\r\n                display: 'Asthma medication review'\r\n              }\r\n            ]\r\n          };\r\n          break;\r\n      }\r\n      if (this.diaryForm.form.value.dateInput !== undefined) {\r\n        const expDate = this.diaryForm.form.value.dateInput;\r\n        console.log(expDate.toISOString());\r\n        newTask.authoredOn = expDate.toISOString();\r\n      }\r\n      newTask.note = [\r\n        {\r\n          text: this.diaryForm.form.value.description\r\n        }\r\n      ];\r\n      console.log(newTask);\r\n      this.fhir.postTask(newTask);\r\n      this.closed.emit();\r\n    }\r\n  }\r\n\r\n}\r\n","<td-window-dialog\r\n        [title]=\"'Create Diary Entry (FHIR Task)'\"\r\n        [toolbarColor]=\"'accent'\"\r\n        (close)=\"closed.emit()\"\r\n>\r\n    <mat-card>\r\n    <td-dynamic-forms #diaryForm [elements]=\"formElements\" >\r\n\r\n    </td-dynamic-forms>\r\n\r\n        <mat-card-actions>\r\n        <button mat-raised-button class=\"text-upper\" (click)=\"closed.emit()\">\r\n            Cancel\r\n        </button>\r\n    <button mat-raised-button class=\"text-upper\" (click)=\"ok($event)\">\r\n        Ok\r\n    </button>\r\n        </mat-card-actions>\r\n    </mat-card>\r\n</td-window-dialog>\r\n","import {CanActivate, Router} from '@angular/router';\r\nimport {Injectable} from '@angular/core';\r\nimport {AuthService} from './auth.service';\r\nimport {Extension, MedicationRequest, Patient} from \"fhir/r4\";\r\n\r\n@Injectable()\r\nexport class AuthGuard  implements CanActivate {\r\n\r\n\r\n  constructor(public router: Router, private auth: AuthService) {\r\n\r\n  }\r\n  canActivate(): any {\r\n    return true;\r\n\r\n    /*\r\n    if (this.auth.hasAccessToken()) {\r\n      return true;\r\n    } else {\r\n        console.log('Auth');\r\n        this.router.navigate(['login']);\r\n        return false;\r\n    }\r\n     */\r\n  }\r\n\r\n}\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {\r\n  Bundle,\r\n  BundleEntry,\r\n  DomainResource,\r\n  Identifier,\r\n  MedicationRequest,\r\n  MessageHeader,\r\n  PractitionerRole,\r\n  Task\r\n} from 'fhir/r4';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {environment} from \"../../environments/environment\";\r\nimport {AuthService} from \"./auth.service\";\r\nimport {MedicationDispense} from 'fhir/r4';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NhsdService {\r\n\r\n  medicationChange: EventEmitter<any> = new EventEmitter();\r\n  public medicationRequest: EventEmitter<MedicationRequest> = new EventEmitter();\r\n  public medicationDispense: EventEmitter<MedicationDispense> = new EventEmitter();\r\n  error: EventEmitter<any> = new EventEmitter();\r\n  constructor(private http: HttpClient) { }\r\n  private medicationRequests: MedicationRequest[] = [];\r\n\r\n  taskChange: EventEmitter<any> = new EventEmitter();\r\n  private tasks: Task[] = [];\r\n  public getTasks(): Task[] {\r\n    return this.tasks;\r\n  }\r\n\r\n  public getMedicationRequests(): MedicationRequest[] {\r\n    return this.medicationRequests;\r\n  }\r\n\r\n  public queryTasks(): any {\r\n\r\n\r\n    const headers = this.getHeaders();\r\n    // tslint:disable-next-line:typedef\r\n    this.http.get(environment.nhsd + '/Task?patient.identifier=9876543210', { headers}).subscribe(\r\n        result => {\r\n          const bundle = result as Bundle;\r\n          if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n            console.log('Task found.');\r\n            this.tasks = [];\r\n            for (const entry of bundle.entry) {\r\n              if (entry.resource?.resourceType === 'Task') {\r\n                this.tasks.push(entry.resource as Task);\r\n              }\r\n            }\r\n            this.taskChange.emit({});\r\n          } else {\r\n            console.log('Task not found.');\r\n          }\r\n        }\r\n    );\r\n  }\r\n\r\n  public convertToTransaction(bundle: Bundle): any {\r\n\r\n    let newBundle: Bundle = {\r\n      resourceType : 'Bundle',\r\n      type : 'transaction',\r\n      entry : []\r\n    };\r\n    let task: any = {\r\n      resourceType : 'Task',\r\n      status: 'ready',\r\n      intent: 'order',\r\n      code: {\r\n        coding: [\r\n          {\r\n            system: 'http://hl7.org/fhir/CodeSystem/task-code',\r\n            code: 'fulfill',\r\n            display: 'Fulfill the focal request'\r\n          }\r\n        ]\r\n      },\r\n      input: []\r\n    };\r\n    let prescriptionorder = false;\r\n    if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n      let practitionerRole: string | undefined = '';\r\n      for (const entry of bundle.entry) {\r\n          const resource = entry.resource as any;\r\n          if (resource?.resourceType === 'Patient') {\r\n              task.for = {\r\n                reference : entry.fullUrl\r\n              };\r\n          }\r\n        if (resource?.resourceType === 'MessageHeader' ) {\r\n          console.log('MessageHeader');\r\n          const medicationHeader = resource as MessageHeader;\r\n          if (medicationHeader.eventCoding?.code === 'prescription-order') {\r\n            prescriptionorder = true;\r\n          }\r\n        }\r\n        if (resource?.resourceType === 'MedicationDispense' ) {\r\n          console.log('MedicationDispene');\r\n          let medicationDispense = resource as MedicationDispense;\r\n          if (medicationDispense.subject?.identifier !== undefined) {\r\n            medicationDispense.subject.reference = 'Patient?identifier=' + medicationDispense.subject.identifier.system\r\n                + '|' + medicationDispense.subject.identifier.value;\r\n          }\r\n          if (medicationDispense.authorizingPrescription !== undefined && medicationDispense.authorizingPrescription.length > 0) {\r\n            for (let ident of medicationDispense.authorizingPrescription) {\r\n              if (ident.identifier !== undefined) {\r\n                ident.reference = 'MedicationRequest?identifier=' + ident.identifier.system\r\n                    + '|' + ident.identifier.value;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n          if ((resource?.resourceType === 'MedicationRequest') ) {\r\n            const medicationRequest = resource as any;\r\n            if (task.identifier === undefined) {\r\n              task.identifier = [];\r\n              task.identifier.push(medicationRequest.groupIdentifier as Identifier);\r\n            }\r\n            task.requester = medicationRequest.requester;\r\n            practitionerRole = medicationRequest.requester?.reference;\r\n            task.authoredOn = medicationRequest.authoredOn;\r\n            if (medicationRequest.dispenseRequest !== undefined && medicationRequest.dispenseRequest.performer !== undefined) {\r\n                task.owner = medicationRequest.dispenseRequest.performer;\r\n                task.status = 'requested';\r\n            }\r\n            const input = {\r\n              type: {\r\n                coding:  [\r\n                  {\r\n                    system: 'http://snomed.info/sct',\r\n                    code: '16076005',\r\n                    display: 'Prescription'\r\n                  }\r\n                ]\r\n              },\r\n              valueReference: {\r\n                type: 'MedicationRequest',\r\n                reference: entry.fullUrl,\r\n                display: medicationRequest?.medicationCodeableConcept?.coding[0].display\r\n              }\r\n            };\r\n            task.input?.push(input);\r\n          }\r\n          if (resource?.identifier !== undefined) {\r\n              let identifier = '';\r\n              if (resource?.identifier.length !== undefined) {\r\n                identifier = this.getIdentifier(resource?.identifier[0]);\r\n              } else {\r\n                identifier = this.getIdentifier(resource?.identifier);\r\n              }\r\n              // @ts-ignore\r\n              entry.request = {\r\n                method : 'PUT',\r\n                url: resource?.resourceType + '?identifier=' + identifier\r\n              };\r\n              newBundle.entry?.push(entry);\r\n          } else {\r\n            // remove resource\r\n          }\r\n\r\n      }\r\n      if (practitionerRole !== '') {\r\n        console.log(practitionerRole);\r\n        for (const entry of bundle.entry) {\r\n          if (entry.fullUrl === practitionerRole) {\r\n            const resource = entry.resource as DomainResource;\r\n\r\n            if (resource.resourceType === 'PractitionerRole') {\r\n                // @ts-ignore\r\n              task.requester.display = (resource as PractitionerRole).practitioner.display;\r\n                // @ts-ignore\r\n              if (task.requester.display === undefined) {\r\n                  // @ts-ignore\r\n                  task.requester.display = (resource as PractitionerRole).identifier[0].value;\r\n                }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n      if (prescriptionorder) {\r\n        console.log(task);\r\n        const entry: BundleEntry = {\r\n          resource : task,\r\n          request : {\r\n            method : 'PUT',\r\n            url: 'Task?identifier=' + this.getIdentifier(task.identifier[0])\r\n          }\r\n        };\r\n        newBundle.entry?.push(entry);\r\n      }\r\n      console.log(newBundle);\r\n      this.http.post(environment.nhsd, JSON.stringify(newBundle), { headers: this.getHeaders() }).subscribe(\r\n          (result) => {\r\n            console.log('done post to hapi');\r\n            console.log(result);\r\n            this.medicationChange.emit({});\r\n          },\r\n          error => {\r\n            this.error.emit(error.error);\r\n          }\r\n      );\r\n    } else {\r\n    }\r\n  }\r\n\r\n  getMedicationRequest(url: string) {\r\n    const headers = this.getHeaders();\r\n    this.http.get<any>(url, {'headers': headers}).subscribe(\r\n        medicationRequest => {\r\n          if (medicationRequest.resourceType === 'Bundle') {\r\n            console.log('Found a Bundle');\r\n            const bundle = medicationRequest as Bundle;\r\n            if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n\r\n              this.medicationRequests = [];\r\n              for (const entry of bundle.entry) {\r\n\r\n                if (entry.resource?.resourceType === 'MedicationRequest') {\r\n\r\n                  this.medicationRequests.push(entry.resource as MedicationRequest);\r\n                }\r\n              }\r\n            } else {\r\n              console.log('Medication not found.');\r\n            }\r\n            this.medicationRequest.emit(medicationRequest);\r\n          } else {\r\n            this.medicationRequest.emit(medicationRequest);\r\n          }\r\n        }\r\n    )\r\n  }\r\n  getMedicationDispense(url: string) {\r\n    const headers = this.getHeaders();\r\n    this.http.get<any>(environment.nhsd + '/MedicationDispense?prescription=' + url, {'headers': headers}).subscribe(\r\n        resource => {\r\n          const bundle: Bundle = resource as Bundle;\r\n          if (bundle.entry !== undefined) {\r\n            for (let entry of bundle.entry) {\r\n\r\n              if (entry.resource?.resourceType === 'MedicationDispense') {\r\n                this.medicationDispense.emit(entry.resource as MedicationDispense);\r\n              }\r\n            }\r\n          }\r\n        }\r\n    )\r\n  }\r\n\r\n  getHeaders(): HttpHeaders {\r\n\r\n    let headers = new HttpHeaders(\r\n    );\r\n\r\n    headers = headers.append('Content-Type', 'application/fhir+json');\r\n    headers = headers.append('Accept', 'application/fhir+json');\r\n    return headers;\r\n  }\r\n\r\n  getIdentifier(identifier: Identifier): string {\r\n    if (identifier.system !== undefined) {\r\n      return identifier.system + '|' + identifier.value;\r\n    } else {\r\n      return <string>identifier.value;\r\n    }\r\n  }\r\n}\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {Task} from 'fhir/r4';\r\nimport {DatePipe} from \"@angular/common\";\r\nimport {FhirService} from \"../service/FhirService\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {IDraggableRefs, TdDialogService} from \"@covalent/core/dialogs\";\r\nimport {DiaryEntryComponent} from \"../diary-entry/diary-entry.component\";\r\nimport {MatSort} from \"@angular/material/sort\";\r\n\r\n@Component({\r\n  selector: 'app-gp-diary',\r\n  templateUrl: './gp-diary.component.html',\r\n  styleUrls: ['./gp-diary.component.scss']\r\n})\r\nexport class GpDiaryComponent implements OnInit {\r\n\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n    displayedColumns: string[] = ['when', 'status', 'reason', 'notes'];\r\n\r\n    dataSource: any;\r\n    data: Task[] = [];\r\n\r\n    @ViewChild(MatSort) sort: MatSort | undefined;\r\n\r\n\r\n  constructor(private fhir: FhirService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n     this.dataSource = new MatTableDataSource <any>(this.data);\r\n     this.fhir.queryTasks();\r\n     this.fhir.taskChange.subscribe(() => {\r\n         this.data = this.fhir.getTasks();\r\n         this.dataSource = new MatTableDataSource(this.data);\r\n         this.dataSource.sort = this.sort;\r\n      });\r\n  }\r\n  diary(): void {\r\n      const task: Task = {\r\n          status: 'ready',\r\n          intent: 'proposal',\r\n          resourceType: 'Task',\r\n          reasonCode: {\r\n              coding: [{\r\n                  code: '182836005'\r\n              }]\r\n          }\r\n      };\r\n\r\n      const {\r\n          matDialogRef,\r\n          dragRefSubject,\r\n      }: IDraggableRefs<DiaryEntryComponent> = this._dialogService.openDraggable({\r\n          component: DiaryEntryComponent,\r\n          dragHandleSelectors: ['mat-toolbar'],\r\n          config: {\r\n              panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n              data : task\r\n          },\r\n      });\r\n\r\n      matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header layout=\"row\" layout-align=\"start center\" flex>\r\n\r\n        <h2>GP Diary Entries (FHIR Task)</h2>\r\n        <span flex></span>\r\n        <button mat-mini-fab matTooltip=\"Add diary etry/task\" aria-label=\"Example icon button with a heart icon\" (click)=\"diary()\">\r\n            <mat-icon>add_shopping_cart</mat-icon>\r\n        </button>\r\n    </mat-card-header>\r\n\r\n    <table mat-table matSort\r\n           matSortActive=\"when\" matSortDirection=\"desc\" [dataSource]=\"dataSource\"  width=\"100%\">\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"80\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"medications\">\r\n            <th mat-header-cell *matHeaderCellDef> Medications </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.input\" let-i=\"index\" >\r\n                        <li>{{item.valueReference.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"pharmacy\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.owner?.identifier.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"requester\">\r\n            <th mat-header-cell *matHeaderCellDef> Requester </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.requester.display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authored\">\r\n            <th mat-header-cell *matHeaderCellDef> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"when\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"120\"> When </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.executionPeriod.start, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"reason\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"240\"> Reason </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.reasonCode.coding[0].display }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"notes\">\r\n            <th mat-header-cell *matHeaderCellDef> Notes </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n            <span *ngIf=\"element.note !== undefined\"> {{element.note[0].text}} </span></td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"order_number\">\r\n            <th mat-header-cell *matHeaderCellDef > Order No. </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.identifier[0].value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"return_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"warn\" *ngIf=\"element.status == 'accepted'\" mat-icon-button><mat-icon>remove_shopping_cart</mat-icon>Cancel</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"view_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> View Order  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button routerLink=\"/details/123453-ABCDFE-12345\" ><mat-icon>inventory</mat-icon>View Details</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Track Package  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button routerLink=\"/details/123453-ABCDFE-12345\" ><mat-icon>local_shipping</mat-icon>Tracking</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n</mat-card>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {MainComponent} from './main/main.component';\r\nimport {OrdersComponent} from './orders/orders.component';\r\nimport {CallbackComponent} from './callback/callback.component';\r\nimport {AuthGuard} from './service/auth-guard';\r\nimport {LoginComponent} from './login/login.component';\r\nimport { MedicationsComponent } from './medications/medications.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', canActivate: [AuthGuard], component: MainComponent,\r\n    children : [\r\n      {path: '', component: OrdersComponent },\r\n      {path: 'tasks', component: OrdersComponent },\r\n      {path: 'medications', component: MedicationsComponent }\r\n        ]\r\n  },\r\n  {  path: 'callback', component : CallbackComponent},\r\n  {  path: 'login', component : LoginComponent}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {environment} from '../../environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  constructor() { }\r\n  callback = document.baseURI + 'callback';\r\n\r\n\r\n  ngOnInit(): void {\r\n    // window.location.href = environment.oauth2.auth + '?client_id=' + environment.oauth2.client_id +\r\n    //    '&response_type=code&redirect_uri=' + this.callback + '&state=123';\r\n  }\r\n\r\n}\r\n","Redirecting to login\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {TdMediaService} from \"@covalent/core/media\";\r\nimport {Router} from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-main',\r\n  templateUrl: './main.component.html',\r\n  styleUrls: ['./main.component.scss']\r\n})\r\nexport class MainComponent implements OnInit {\r\n\r\n  opened = false;\r\n  constructor(public media: TdMediaService,\r\n              private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onClick(route: string) {\r\n    this.router.navigateByUrl(route);\r\n  }\r\n\r\n}\r\n","\r\n<mat-menu #recordsMenu=\"matMenu\">\r\n    <button mat-menu-item routerLink=\"/tasks\"><mat-icon>gavel</mat-icon>Task Manager</button>\r\n    <button mat-menu-item routerLink=\"/medications\"><mat-icon>sanitizer</mat-icon>Medications</button>\r\n</mat-menu>\r\n<td-layout class=\"layout-nav-demo\" sidenavWidth=\"280px\">\r\n    <td-navigation-drawer\r\n            flex\r\n            sidenavTitle=\"Menu\" >\r\n        <mat-list>\r\n        </mat-list>\r\n        <span>\r\n    </span>\r\n    </td-navigation-drawer>\r\n    <td-layout-nav-list navigationRoute=\"/\" mode=\"side\"  [opened]=opened>\r\n\r\n        <div td-sidenav-content>\r\n            stuff\r\n        </div>\r\n        <div td-toolbar-content layout=\"row\" layout-align=\"start center\" flex>\r\n\r\n            <span>Codename: Danube</span>\r\n            <span flex></span>\r\n\r\n            <button mat-button disabled=\"true\"  matTooltip=\"Orders\"><mat-icon>add_shopping_cart</mat-icon>Basket</button>\r\n            <button mat-icon-button [matMenuTriggerFor]=\"recordsMenu\"><mat-icon>menu</mat-icon></button>\r\n        </div>\r\n\r\n\r\n        <router-outlet></router-outlet>\r\n        <td-layout-footer>\r\n            <div layout=\"row\" layout-align=\"start center\">\r\n                <span class=\"mat-caption\">Copyright &copy; 2021 Virtually Healthcare and Mayfield IS. All rights reserved</span>\r\n            </div>\r\n        </td-layout-footer>\r\n    </td-layout-nav-list>\r\n</td-layout>\r\n","import {Component, Input, OnInit, ViewChild} from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {FhirService} from '../service/FhirService';\r\nimport {MedicationRequest, Task} from 'fhir/r4';\r\nimport {DatePipe} from '@angular/common';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n    IDraggableRefs,\r\n    ResizableDraggableDialog,\r\n    TdDialogService,\r\n    TdPromptDialogComponent\r\n} from '@covalent/core/dialogs';\r\nimport {DiaryEntryComponent} from '../diary-entry/diary-entry.component';\r\nimport {TrackingComponent} from '../tracking/tracking.component';\r\nimport {NhsdService} from '../service/nhsd.service';\r\nimport {environment} from '../../environments/environment';\r\nimport {MatSort} from '@angular/material/sort';\r\n\r\n\r\n@Component({\r\n  selector: 'app-prescription-refill',\r\n  templateUrl: './prescription-refill.component.html',\r\n  styleUrls: ['./prescription-refill.component.scss']\r\n})\r\nexport class PrescriptionRefillComponent implements OnInit {\r\n\r\n    @Input()\r\n    source = 'GP';\r\n\r\n    @ViewChild(MatSort) sort: MatSort | undefined;\r\n\r\n    displayedColumns: string[] = ['authoredOn', 'status', 'name',  'courseOfTherapy', 'dose',  'quantity', 'reorder_medication', 'track_order'];\r\n\r\n    dataSource: any;\r\n\r\n    prescription: MedicationRequest[] =  [];\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n\r\n\r\n  constructor(private fhir: FhirService,\r\n              private nhsd: NhsdService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n      this.dataSource = new MatTableDataSource <any>(this.prescription);\r\n      if (this.source === 'GP') {\r\n          this.fhir.queryMedicationRequests();\r\n          this.fhir.medicationChange.subscribe(() => {\r\n              this.prescription = this.fhir.getMedicationRequests();\r\n              this.dataSource = new MatTableDataSource(this.prescription);\r\n              this.dataSource.sort = this.sort;\r\n          });\r\n      } else {\r\n          this.nhsd.getMedicationRequest(environment.nhsd + '/MedicationRequest?patient.identifier=9876543210');\r\n          this.nhsd.medicationRequest.subscribe(() => {\r\n              this.prescription = this.nhsd.getMedicationRequests();\r\n              this.dataSource = new MatTableDataSource(this.prescription);\r\n              this.dataSource.sort = this.sort;\r\n          });\r\n      }\r\n  }\r\n\r\n    // tslint:disable-next-line:typedef\r\n    ngAfterViewInit() {\r\n\r\n        if (this.sort !== undefined) {\r\n            this.sort.sortChange.subscribe((event: any) => {\r\n                console.log(event);\r\n            });\r\n\r\n        } else {\r\n            console.log('SORT UNDEFINED');\r\n        }\r\n    }\r\n\r\n  tracking(event: any): void {\r\n      const {\r\n          matDialogRef,\r\n          dragRefSubject,\r\n      }: IDraggableRefs<TrackingComponent> = this._dialogService.openDraggable({\r\n          component: TrackingComponent,\r\n          dragHandleSelectors: ['mat-toolbar'],\r\n          config: {\r\n              panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n          },\r\n      });\r\n\r\n      matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n  }\r\n\r\n  refill(resource: MedicationRequest): void {\r\n\r\n      const task: Task = {\r\n          status: 'ready',\r\n          intent: 'proposal',\r\n          resourceType: 'Task',\r\n          note : [],\r\n          reasonCode: {\r\n              coding: [{\r\n                  code: '103742009'\r\n              }]\r\n          }\r\n      };\r\n      if (resource.medicationCodeableConcept !== undefined\r\n          && resource.medicationCodeableConcept.coding !== undefined\r\n          && resource.medicationCodeableConcept.coding[0].display !== undefined) {\r\n          // @ts-ignore\r\n          task.note = [\r\n              {\r\n                  text: resource.medicationCodeableConcept.coding[0].display\r\n                      + ' (' +  this.datepipe.transform(resource.authoredOn, 'dd MMM yyyy') +  ')'\r\n              }\r\n          ];\r\n      }\r\n      if (this.source === 'EPS') {\r\n          task.note?.push({\r\n              text : 'EPS prescription number ' + resource.groupIdentifier?.value + ' '\r\n          });\r\n          if (resource.requester?.display !== undefined) {\r\n              task.note?.push({\r\n                  text : 'Prescriber ' + resource.requester.display\r\n              });\r\n          }\r\n      }\r\n      const {\r\n          matDialogRef,\r\n          dragRefSubject,\r\n      }: IDraggableRefs<DiaryEntryComponent> = this._dialogService.openDraggable({\r\n          component: DiaryEntryComponent,\r\n          dragHandleSelectors: ['mat-toolbar'],\r\n          config: {\r\n              panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n              data : task\r\n          },\r\n      });\r\n\r\n      matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header><h2>{{source}} Medication Record (FHIR MedicationRequest)</h2></mat-card-header>\r\n    <table\r\n            matSort\r\n            matSortActive=\"status\" matSortDirection=\"asc\"\r\n            mat-table [dataSource]=\"dataSource\"  width=\"100%\">\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <!-- Position Column -->\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"140\"> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.medicationCodeableConcept.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.width.px]=\"80\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}}  </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authoredOn\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"dose\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"180\"> Dose </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dosageInstruction[0].text}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"80\"> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"80\"> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.value}} &nbsp; {{element.dispenseRequest.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n\r\n        <ng-container matColumnDef=\"courseOfTherapy\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"40\"> Type </th>\r\n            <td mat-cell  *matCellDef=\"let element\">\r\n                <span *ngIf=\"element.courseOfTherapyType.coding[0].code.startsWith('continuous')\">\r\n                      <button color=\"accent\" mat-icon-button [matTooltip]=element.courseOfTherapyType.coding[0].display (click)=\"refill(element)\"><mat-icon>repeat</mat-icon></button> </span>\r\n                <span *ngIf=\"!element.courseOfTherapyType.coding[0].code.startsWith('continuous')\">\r\n                <button color=\"accent\"  mat-icon-button [matTooltip]=element.courseOfTherapyType.coding[0].display (click)=\"refill(element)\"><mat-icon>arrow_right_alt</mat-icon></button> </span>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n\r\n        <ng-container matColumnDef=\"reorder_medication\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Reorder </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <span *ngIf=\"source === 'EPS' || element.courseOfTherapyType.coding[0].code === 'continuous'\">\r\n                    <button color=\"accent\" mat-icon-button matTooltip=\"Reorder Medication\" (click)=\"refill(element)\"><mat-icon>add_shopping_cart</mat-icon></button>\r\n                </span>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Tracking</th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\"  mat-icon-button matTooltip=\"Tracking\" (click)=\"tracking(element)\"><mat-icon>local_shipping</mat-icon></button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n\r\n</mat-card>\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}