{"version":3,"sources":["./src/app/prescription-order-detail/prescription-order-detail.component.ts","./src/app/prescription-order-detail/prescription-order-detail.component.html","./src/app/orders/orders.component.ts","./src/app/orders/orders.component.html","./src/app/service/auth.service.ts","./src/app/eps-orders/prescription-orders.component.ts","./src/app/eps-orders/prescription-orders.component.html","./src/environments/environment.ts","./src/app/callback/callback.component.ts","./src/app/callback/callback.component.html","./src/app/refill/refill.component.ts","./src/app/refill/refill.component.html","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/service/FhirService.ts","./src/app/gp-task/gp-task.component.ts","./src/app/gp-task/gp-task.component.html","./src/app/service/auth-guard.ts","./src/app/service/nhsd.service.ts","./src/app/gp-diary/gp-diary.component.ts","./src/app/gp-diary/gp-diary.component.html","./src/app/app-routing.module.ts","./src/app/login/login.component.ts","./src/app/login/login.component.html","./src/app/main/main.component.ts","./src/app/main/main.component.html","./src/app/gp-prescriptions/prescription-refill.component.ts","./src/app/gp-prescriptions/prescription-refill.component.html","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["import {Component, Inject, OnInit, ViewContainerRef} from '@angular/core';\r\nimport {MatTableDataSource} from \"@angular/material/table\";\r\nimport {TdDialogService} from \"@covalent/core/dialogs\";\r\nimport {DOCUMENT} from \"@angular/common\";\r\n\r\n@Component({\r\n  selector: 'app-prescription-order-detail',\r\n  templateUrl: './prescription-order-detail.component.html',\r\n  styleUrls: ['./prescription-order-detail.component.scss']\r\n})\r\nexport class PrescriptionOrderDetailComponent implements OnInit {\r\n\r\n\r\n    displayedColumns: string[] = ['concept', 'name', 'quantity', 'unit'];\r\n\r\n    displayedDispenseColumns: string[] = ['prepared','concept', 'name', 'quantity', 'status'];\r\n\r\n    dataSource : any;\r\n    dispenseDataSource : any;\r\n\r\n    data: any[] =  [\r\n        {\r\n            'concept' : '322237000',\r\n            'name' : 'Paracetamol 500mg soluble tablets',\r\n            'quantity' : '100',\r\n            'unit' : 'tablet'\r\n        },\r\n        {\r\n            'concept' : '35936511000001108',\r\n            'name' : 'Salbutamol 100micrograms/dose inhaler',\r\n            'quantity' : '200',\r\n            'unit' : 'dose'\r\n        }\r\n    ]\r\n    dispensedata: any[] =  [\r\n        {\r\n            'prepared' : '2020-06-10T16:30:00+00:00',\r\n            'concept' : '1858411000001101',\r\n            'name' : 'Paracetamol 500mg soluble tablets (Unichem Plc)',\r\n            'quantity' : '60 tablets',\r\n            'status' : '0003 (Partial)'\r\n        },\r\n        {\r\n            'prepared' : '2020-06-10T16:30:00+00:00',\r\n            'concept' : '3416211000001106',\r\n            'name' : 'Salbutamol 100micrograms/dose inhaler (Sandoz Ltd)',\r\n            'quantity' : '200 dose',\r\n            'status' : '0001 (Dispensed)'\r\n        },\r\n        {\r\n            'prepared' : '2020-06-25T15:30:00+00:00',\r\n            'concept' : '915611000001105',\r\n            'name' : 'Paracetamol 500mg soluble tablets (AAH Pharmaceuticals Ltd)',\r\n            'quantity' : '24 tablets',\r\n            'status' : '0003 (Partial)'\r\n        },{\r\n            'prepared' : '2020-06-25T15:30:00+00:00',\r\n            'concept' : '2274211000001101',\r\n            'name': 'Paracetamol 500mg soluble tablets (Kent Pharmaceuticals)',\r\n            'quantity': '16 tablets',\r\n            'status': '0001 (Dispensed)'\r\n\r\n                }\r\n                ]\r\n    closed: any;\r\n\r\n  constructor(private _dialogService: TdDialogService,\r\n              private _viewContainerRef: ViewContainerRef\r\n              ) { }\r\n\r\n  ngOnInit(): void {\r\n      this.dataSource = new MatTableDataSource <any>(this.data);\r\n      this.dispenseDataSource = new MatTableDataSource <any>(this.dispensedata);\r\n  }\r\n\r\n}\r\n","\r\n<mat-dialog-content>\r\n<table mat-table [dataSource]=\"dataSource\" >\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <!-- Position Column -->\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.name}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Weight Column -->\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.quantity}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.unit}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"cancel_medication\">\r\n            <th mat-header-cell *matHeaderCellDef> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button mat-icon-button matTooltip=\"This is the prescription-order-update message to /$process-message endpoint. Only valid currently for prescriber\"><mat-icon>assignment_return</mat-icon>Cancel Item</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n    <h2>Tracking / Dispensing History</h2>\r\n    Would make sense to list the dispense history here.\r\n\r\n    <table mat-table [dataSource]=\"dispenseDataSource\">\r\n\r\n        <ng-container matColumnDef=\"prepared\">\r\n            <th mat-header-cell *matHeaderCellDef> Dispensed </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.prepared}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.name}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Weight Column -->\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.quantity}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"cancel_dispense\">\r\n            <th mat-header-cell *matHeaderCellDef> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button mat-icon-button matTooltip=\"This is the ETPWithdrawal interaction. Does not map well to FHIR \"><mat-icon>assignment_return</mat-icon>Cancel Dispense</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedDispenseColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedDispenseColumns;\"></tr>\r\n    </table>\r\n</mat-dialog-content>\r\n<mat-dialog-actions>\r\n    <button mat-button mat-dialog-close>Cancel</button>\r\n    <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->\r\n</mat-dialog-actions>\r\n\r\n\r\n\r\n\r\n","import {Component, EventEmitter, OnInit} from '@angular/core';\r\nimport {Bundle} from 'fhir/r4';\r\nimport {NhsdService} from '../service/nhsd.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-orders',\r\n  templateUrl: './orders.component.html',\r\n  styleUrls: ['./orders.component.scss']\r\n})\r\nexport class OrdersComponent implements OnInit {\r\n\r\n  files: File | FileList | undefined;\r\n  disabled = false;\r\n\r\n  constructor(\r\n      private hapi: NhsdService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  // https://stackoverflow.com/questions/40214772/file-upload-in-angular\r\n\r\n  selectEvent(files: FileList | File): void {\r\n    if (files instanceof FileList) {\r\n      console.log('is filelist');\r\n    } else if (files instanceof File) {\r\n      console.log('is file');\r\n      const file: File = files;\r\n      const fileReader: FileReader = new FileReader();\r\n      // tslint:disable-next-line:only-arrow-functions typedef\r\n      fileReader.onloadend = (e) => {\r\n        if (typeof fileReader.result === 'string') {\r\n          const bundle = JSON.parse(fileReader.result) as Bundle;\r\n          this.hapi.convertToTransaction(bundle);\r\n        }\r\n      };\r\n      fileReader.readAsText(file);\r\n    } else {\r\n      console.log('not a file type');\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<mat-card>\r\n   <!-- <h2>COVID-19 Vaccinations History</h2>\r\n    <br/> -->\r\n\r\n\r\n    <app-prescription-orders></app-prescription-orders>\r\n    <app-gp-diary></app-gp-diary>\r\n    <app-prescription-refill></app-prescription-refill>\r\n\r\n    <br />\r\n    <div>\r\n\r\n        <td-file-input [(ngModel)]=\"files\" color=\"primary\" (select)=\"selectEvent($event)\"\r\n                       accept=\".json,.xml\">\r\n            <mat-icon>attach_file</mat-icon><span>Choose a FHIR Bundle file...</span>\r\n        </td-file-input>\r\n\r\n    </div>\r\n</mat-card>\r\n","\r\n\r\nimport {environment} from '../../environments/environment';\r\n\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {EventEmitter, Injectable} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {JwtHelperService} from '@auth0/angular-jwt';\r\n\r\n\r\n\r\nclass Oauth2token {\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n    private smartToken: Oauth2token | undefined;\r\n\r\n    private accessToken = undefined;\r\n\r\n    tokenChange: EventEmitter<Oauth2token> = new EventEmitter();\r\n\r\n   public auth = false;\r\n\r\n  constructor(\r\n             private router: Router,\r\n             private http: HttpClient\r\n              ) {\r\n\r\n  }\r\n\r\n    performGetAccessToken(authCode: string | null): any {\r\n\r\n\r\n    // https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-combined-authentication-and-authorisation\r\n\r\n    const bearerToken = 'Basic ' + btoa(environment.oauth2.client_id + ':' + environment.oauth2.client_secret);\r\n    const headers = new HttpHeaders( { 'Content-Type': 'application/x-www-form-urlencoded'});\r\n\r\n    const url = environment.oauth2.token;\r\n\r\n\r\n    const urlParams = new URLSearchParams(\r\n            { grant_type: 'authorization_code'});\r\n\r\n    urlParams.append('client_id', environment.oauth2.client_id),\r\n    urlParams.append(  'client_secret', environment.oauth2.client_secret);\r\n    urlParams.append(  'redirect_uri', document.baseURI + 'callback');\r\n    if (typeof authCode === 'string') {\r\n        urlParams.append('code', authCode);\r\n    }\r\n\r\n    this.postAny(url, urlParams.toString(),  headers  ).subscribe( (token: any) => {\r\n        // console.log(response);\r\n        this.smartToken = token;\r\n        console.log('OAuth2Token : ' + token);\r\n        this.setAccessToken(token);\r\n\r\n        }\r\n      , (error: any) => {\r\n        console.log(error);\r\n      }\r\n      , () => {\r\n        // Emit event\r\n      }\r\n    );\r\n  }\r\n\r\n    // tslint:disable-next-line:typedef\r\n    public postAny(url: string | null, body: string, httpHeaders: HttpHeaders) {\r\n        return this.http.post<any>(url as string, body, {headers: httpHeaders});\r\n    }\r\n\r\n    public setAccessToken(token: { expires_at: any; expires_in: number; access_token: any; }): any {\r\n        // tslint:disable-next-line:new-parens\r\n        const date = new Date;\r\n        // Create an expires at ..... don't know when we got the token\r\n        token.expires_at = Math.round((new Date().valueOf()) / 1000) + token.expires_in;\r\n        localStorage.setItem('nhsdToken', JSON.stringify(token));\r\n        this.accessToken = token.access_token;\r\n        this.tokenChange.emit(token);\r\n    }\r\n    public hasAccessToken(): boolean {\r\n        return this.getAccessToken() !== undefined;\r\n    }\r\n\r\n    public getAccessToken(): any {\r\n        if (localStorage.getItem('nhsdToken') !== undefined) {\r\n            const token: any = JSON.parse(localStorage.getItem('nhsdToken') as any);\r\n            const helper = new JwtHelperService();\r\n            if (this.isTokenExpired(token)) {\r\n\r\n                console.log('withings Token expired');\r\n                this.accessToken = undefined;\r\n                //  this.getRefreshToken();\r\n                return undefined;\r\n            }\r\n            if (token !== undefined) {\r\n                this.accessToken = token.access_token;\r\n                return this.accessToken;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n\r\n    private deleteAccessToken(): any {\r\n        this.accessToken = undefined;\r\n        localStorage.removeItem('nhsdToken');\r\n    }\r\n\r\n    private getTokenExpirationDate(\r\n        decoded: any\r\n    ): Date | null {\r\n\r\n        if (!decoded || !decoded.hasOwnProperty('expires_at')) {\r\n            // Invalid format\r\n            localStorage.removeItem('nhsdToken');\r\n            return null;\r\n        }\r\n\r\n        const date = new Date(0);\r\n        date.setUTCSeconds(decoded.expires_at);\r\n\r\n        return date;\r\n    }\r\n\r\n    private isTokenExpired(\r\n        token: any,\r\n        offsetSeconds?: number\r\n    ): boolean {\r\n        if (!token || token === '') {\r\n            return true;\r\n        }\r\n        const date = this.getTokenExpirationDate(token);\r\n        offsetSeconds = offsetSeconds || 0;\r\n\r\n        console.log('nhsd token expiry date ' + date);\r\n        if (date === null) {\r\n            return false;\r\n        }\r\n        return !(date.valueOf() > new Date().valueOf() + offsetSeconds * 1000);\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {MatDialog,MatDialogConfig} from '@angular/material/dialog';\r\nimport {NhsdService} from '../service/nhsd.service';\r\nimport {Task} from 'fhir/r4';\r\nimport {DatePipe} from \"@angular/common\";\r\nimport {PrescriptionOrderDetailComponent} from \"../prescription-order-detail/prescription-order-detail.component\";\r\n\r\n@Component({\r\n  selector: 'app-prescription-orders',\r\n  templateUrl: './prescription-orders.component.html',\r\n  styleUrls: ['./prescription-orders.component.scss']\r\n})\r\nexport class PrescriptionOrdersComponent implements OnInit {\r\n\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n    displayedColumns: string[] = ['authored', 'status', 'requester', 'pharmacy', 'medications', 'order_number',  'view_order', 'track_order'];\r\n\r\n    dataSource: any;\r\n    data: Task[] = [];\r\n\r\n\r\n  constructor(private hapi: NhsdService,\r\n              private dialog: MatDialog) { }\r\n\r\n  ngOnInit(): void {\r\n     this.dataSource = new MatTableDataSource <any>(this.data);\r\n     this.hapi.queryTasks();\r\n     this.hapi.taskChange.subscribe(() => {\r\n          this.dataSource = new MatTableDataSource(this.hapi.getTasks());\r\n      });\r\n  }\r\n\r\n  view(resource: any): void {\r\n      const dialogConfig = new MatDialogConfig();\r\n\r\n      dialogConfig.disableClose = true;\r\n      dialogConfig.autoFocus = true;\r\n      dialogConfig.data = {\r\n          id: 1,\r\n          resource: resource\r\n      };\r\n      this.dialog.open( PrescriptionOrderDetailComponent, dialogConfig);\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header><h2>EPS Prescription Orders (FHIR Task)</h2>\r\n\r\n    </mat-card-header>\r\n    <table mat-table [dataSource]=\"dataSource\" width=\"100%\" >\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"medications\">\r\n            <th mat-header-cell *matHeaderCellDef> Medications </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.input\" let-i=\"index\" >\r\n                        <li>{{item.valueReference.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"pharmacy\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.owner?.identifier.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"requester\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Requester </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.requester.display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authored\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"order_number\">\r\n            <th mat-header-cell *matHeaderCellDef > Order No. </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.identifier[0].value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"return_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"warn\" *ngIf=\"element.status == 'accepted'\" mat-icon-button><mat-icon>remove_shopping_cart</mat-icon>Cancel</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"view_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> View Order  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button (click)=\"view(element)\" ><mat-icon>inventory</mat-icon>View Details</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Track Package  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button ><mat-icon>local_shipping</mat-icon>Tracking</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n</mat-card>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  oauth2 : {\r\n    token : 'https://int.api.service.nhs.uk/oauth2-no-smartcard/token',\r\n    auth : 'https://int.api.service.nhs.uk/oauth2-no-smartcard/authorize',\r\n    client_id : 'FXmDMToQI68FhfNmqA3QgaiPJ3AdrRQt',\r\n    client_secret : '1GVeaPTFi59WEX7V',\r\n    cookie_domain : 'localhost',\r\n    logonUrl: 'http://localhost:4200/ccri-logon'\r\n  },\r\n  virtually: 'https://emis-api-lb-test-294292503.eu-west-2.elb.amazonaws.com/R4',\r\n  nhsd: 'https://server.fire.ly/r4',\r\n  hapibase: 'http://hapi.fhir.org/baseR4',\r\n  firelybase : 'https://server.fire.ly/r4'\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {AuthService} from '../service/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-callback',\r\n  templateUrl: './callback.component.html',\r\n  styleUrls: ['./callback.component.css']\r\n})\r\nexport class CallbackComponent implements OnInit {\r\n\r\n  constructor(private route: ActivatedRoute,\r\n              private auth: AuthService,\r\n              private router: Router) { }\r\n\r\n  private authCode = '' ;\r\n\r\n  subOAuth2: any;\r\n\r\n  // tslint:disable-next-line:typedef\r\n  ngOnInit() {\r\n\r\n    this.auth.tokenChange.subscribe(\r\n        () => {\r\n          this.router.navigateByUrl('/');\r\n        }\r\n    );\r\n    this.route.queryParamMap.subscribe(params => {\r\n      console.log(params);\r\n      const code = params.get('code');\r\n      // var state = params.get('state');\r\n      this.auth.performGetAccessToken(code);\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","callback done\r\n","import {Component, OnInit, ViewContainerRef} from '@angular/core';\nimport {TdDialogService} from '@covalent/core/dialogs';\n\n@Component({\n  selector: 'app-refill',\n  templateUrl: './refill.component.html',\n  styleUrls: ['./refill.component.scss']\n})\nexport class RefillComponent implements OnInit {\n\n  constructor(private _dialogService: TdDialogService,\n              private _viewContainerRef: ViewContainerRef) { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>refill works!</p>\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'phr';\r\n}\r\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport {CovalentDynamicFormsModule} from \"@covalent/dynamic-forms\";\r\nimport {CovalentLayoutModule} from \"@covalent/core/layout\";\r\nimport {CovalentStepsModule} from \"@covalent/core/steps\";\r\nimport {CovalentHighlightModule} from \"@covalent/highlight\";\r\nimport {CovalentMarkdownModule} from \"@covalent/markdown\";\r\nimport {CovalentBaseEchartsModule} from \"@covalent/echarts/base\";\r\nimport {CovalentHttpModule} from \"@covalent/http\";\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport {MainComponent} from \"./main/main.component\";\r\nimport {MatChipsModule} from \"@angular/material/chips\";\r\nimport {MatTooltipModule} from \"@angular/material/tooltip\";\r\nimport {MatTableModule} from \"@angular/material/table\";\r\nimport {CovalentDataTableModule} from \"@covalent/core/data-table\";\r\nimport {MatButtonModule} from \"@angular/material/button\";\r\nimport {MatIconModule} from \"@angular/material/icon\";\r\nimport {MatMenuModule} from \"@angular/material/menu\";\r\nimport {MatCardModule} from \"@angular/material/card\";\r\nimport {MatList, MatListModule} from \"@angular/material/list\";\r\nimport {FlexLayoutModule} from \"@angular/flex-layout\";\r\nimport { OrdersComponent } from './orders/orders.component';\r\nimport {PrescriptionRefillComponent} from \"./gp-prescriptions/prescription-refill.component\";\r\nimport {PrescriptionOrderDetailComponent} from \"./prescription-order-detail/prescription-order-detail.component\";\r\nimport {CovalentMessageModule} from \"@covalent/core/message\";\r\nimport {PrescriptionOrdersComponent} from \"./eps-orders/prescription-orders.component\";\r\nimport {CallbackComponent} from \"./callback/callback.component\";\r\nimport {AuthGuard} from \"./service/auth-guard\";\r\nimport { LoginComponent } from './login/login.component';\r\nimport {CovalentFileModule} from \"@covalent/core/file\";\r\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\r\nimport {GpDiaryComponent} from \"./gp-diary/gp-diary.component\";\r\nimport {CovalentDialogsModule} from \"@covalent/core/dialogs\";\r\nimport {MatDialogModule} from '@angular/material/dialog';\r\nimport { RefillComponent } from './refill/refill.component';\nimport { GpTaskComponent } from './gp-task/gp-task.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MainComponent,\r\n    OrdersComponent,\r\n      PrescriptionRefillComponent,\r\n      PrescriptionOrdersComponent,\r\n      GpDiaryComponent,\r\n      CallbackComponent,\r\n      LoginComponent,\r\n      PrescriptionOrderDetailComponent,\r\n      RefillComponent,\r\n      GpTaskComponent\r\n  ],\r\n    imports: [\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        FlexLayoutModule,\r\n        BrowserAnimationsModule,\r\n\r\n        CovalentLayoutModule,\r\n        CovalentStepsModule,\r\n        // (optional) Additional Covalent Modules imports\r\n        CovalentHttpModule.forRoot(),\r\n        CovalentHighlightModule,\r\n        CovalentMarkdownModule,\r\n        CovalentDynamicFormsModule,\r\n        CovalentBaseEchartsModule,\r\n        CovalentMessageModule,\r\n        CovalentDialogsModule,\r\n\r\n        MatIconModule,\r\n        MatButtonModule,\r\n        CovalentDataTableModule,\r\n        MatMenuModule,\r\n        MatListModule,\r\n        MatCardModule,\r\n        MatTableModule,\r\n        MatTooltipModule,\r\n        MatChipsModule,\r\n        CovalentFileModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        MatDialogModule\r\n    ],\r\n    entryComponents: [\r\n        PrescriptionOrderDetailComponent,\r\n        RefillComponent\r\n    ],\r\n  providers: [\r\n      AuthGuard\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {AuthService} from './auth.service';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {Bundle, MedicationRequest, Task} from 'fhir/r4';\r\nimport {environment} from '../../environments/environment';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class FhirService {\r\n\r\n    private medicationRequests: MedicationRequest[] = [];\r\n\r\n\r\n    medicationChange: EventEmitter<any> = new EventEmitter();\r\n    constructor(private http: HttpClient,\r\n                private auth: AuthService) {\r\n    }\r\n\r\n    taskChange: EventEmitter<any> = new EventEmitter();\r\n    private tasks: Task[] = [];\r\n\r\n    public getTasks(): Task[] {\r\n        return this.tasks;\r\n    }\r\n\r\n    public queryTasks(): any {\r\n\r\n\r\n        const headers = this.getHeaders();\r\n        // tslint:disable-next-line:typedef\r\n        this.http.get(environment.virtually + '/Task?patient=137', { headers}).subscribe(\r\n            result => {\r\n                const bundle = result as Bundle;\r\n                if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n                    console.log('Task found.');\r\n                    this.tasks = [];\r\n                    for (const entry of bundle.entry) {\r\n                        this.tasks.push(entry.resource as Task);\r\n                    }\r\n                    this.taskChange.emit({});\r\n                } else {\r\n                    console.log('Task not found.');\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    public getMedicationRequests(): MedicationRequest[] {\r\n        return this.medicationRequests;\r\n    }\r\n    public queryMedicationRequests(): any {\r\n\r\n        const headers = this.getHeaders();\r\n        // tslint:disable-next-line:typedef\r\n        this.http.get(environment.virtually + '/MedicationRequest?patient=137&date=2019-01-01', { headers}).subscribe(\r\n            result => {\r\n                const bundle = result as Bundle;\r\n                if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n                    console.log('Medication found.');\r\n                    this.medicationRequests = [];\r\n                    for (const entry of bundle.entry) {\r\n                        this.medicationRequests.push(entry.resource as MedicationRequest);\r\n                    }\r\n                    this.medicationChange.emit({});\r\n                } else {\r\n                    console.log('Medication not found.');\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    getHeaders(): HttpHeaders {\r\n\r\n        let headers = new HttpHeaders(\r\n        );\r\n\r\n        headers = headers.append('Content-Type', 'application/fhir+json');\r\n        headers = headers.append('Accept', 'application/fhir+json');\r\n        // headers = headers.append(\"Authorization\", \"Bearer \"+this.auth.getAccessToken());\r\n        return headers;\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-gp-task',\n  templateUrl: './gp-task.component.html',\n  styleUrls: ['./gp-task.component.scss']\n})\nexport class GpTaskComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>gp-task works!</p>\n","import {CanActivate, Router} from '@angular/router';\r\nimport {Injectable} from '@angular/core';\r\nimport {AuthService} from './auth.service';\r\nimport {Extension, MedicationRequest, Patient} from \"fhir/r4\";\r\n\r\n@Injectable()\r\nexport class AuthGuard  implements CanActivate {\r\n\r\n\r\n  constructor(public router: Router, private auth: AuthService) {\r\n\r\n  }\r\n  canActivate(): any {\r\n\r\n\r\n    if (this.auth.hasAccessToken()) {\r\n      return true;\r\n    } else {\r\n        console.log('Auth');\r\n        this.router.navigate(['login']);\r\n        return false;\r\n    }\r\n  }\r\n\r\n}\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {\r\n  Bundle,\r\n  BundleEntry,\r\n  DomainResource,\r\n  Identifier,\r\n  MedicationRequest,\r\n  MessageHeader,\r\n  PractitionerRole,\r\n  Task\r\n} from 'fhir/r4';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {environment} from \"../../environments/environment\";\r\nimport {AuthService} from \"./auth.service\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NhsdService {\r\n\r\n  medicationChange: EventEmitter<any> = new EventEmitter();\r\n  constructor(private http: HttpClient) { }\r\n\r\n\r\n  taskChange: EventEmitter<any> = new EventEmitter();\r\n  private tasks: Task[] = [];\r\n  public getTasks(): Task[] {\r\n    return this.tasks;\r\n  }\r\n\r\n  public queryTasks(): any {\r\n\r\n\r\n    const headers = this.getHeaders();\r\n    // tslint:disable-next-line:typedef\r\n    this.http.get(environment.nhsd + '/Task?patient.identifier=9453740519', { headers}).subscribe(\r\n        result => {\r\n          const bundle = result as Bundle;\r\n          if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n            console.log('Task found.');\r\n            this.tasks = [];\r\n            for (const entry of bundle.entry) {\r\n              if (entry.resource?.resourceType === 'Task') {\r\n                this.tasks.push(entry.resource as Task);\r\n              }\r\n            }\r\n            this.taskChange.emit({});\r\n          } else {\r\n            console.log('Task not found.');\r\n          }\r\n        }\r\n    );\r\n  }\r\n\r\n  public convertToTransaction(bundle: Bundle): any {\r\n\r\n    let newBundle: Bundle = {\r\n      resourceType : 'Bundle',\r\n      type : 'transaction',\r\n      entry : []\r\n    };\r\n    let task: any = {\r\n      resourceType : 'Task',\r\n      status: 'ready',\r\n      intent: 'order',\r\n      code: {\r\n        coding: [\r\n          {\r\n            system: 'http://hl7.org/fhir/CodeSystem/task-code',\r\n            code: 'fulfill',\r\n            display: 'Fulfill the focal request'\r\n          }\r\n        ]\r\n      },\r\n      input: []\r\n    };\r\n    let prescriptionorder = false;\r\n    if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n      let practitionerRole: string | undefined = '';\r\n      for (const entry of bundle.entry) {\r\n          const resource = entry.resource as any;\r\n          if (resource?.resourceType === 'Patient') {\r\n              task.for = {\r\n                reference : entry.fullUrl\r\n              };\r\n          }\r\n        if (resource?.resourceType === 'MessageHeader' ) {\r\n          console.log('MessageHeader');\r\n          const medicationHeader = resource as MessageHeader;\r\n          if (medicationHeader.eventCoding?.code === 'prescription-order') {\r\n            prescriptionorder = true;\r\n          }\r\n        }\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n          if ((resource?.resourceType === 'MedicationRequest') ) {\r\n            const medicationRequest = resource as any;\r\n            if (task.identifier === undefined) {\r\n              task.identifier = [];\r\n              task.identifier.push(medicationRequest.groupIdentifier as Identifier);\r\n            }\r\n            task.requester = medicationRequest.requester;\r\n            practitionerRole = medicationRequest.requester?.reference;\r\n            task.authoredOn = medicationRequest.authoredOn;\r\n            if (medicationRequest.dispenseRequest !== undefined && medicationRequest.dispenseRequest.performer !== undefined) {\r\n                task.owner = medicationRequest.dispenseRequest.performer;\r\n                task.status = 'requested';\r\n            }\r\n            const input = {\r\n              type: {\r\n                coding:  [\r\n                  {\r\n                    system: 'http://snomed.info/sct',\r\n                    code: '16076005',\r\n                    display: 'Prescription'\r\n                  }\r\n                ]\r\n              },\r\n              valueReference: {\r\n                type: 'MedicationRequest',\r\n                reference: entry.fullUrl,\r\n                display: medicationRequest?.medicationCodeableConcept?.coding[0].display\r\n              }\r\n            };\r\n            task.input?.push(input);\r\n          }\r\n          if (resource?.identifier !== undefined) {\r\n              let identifier = '';\r\n              if (resource?.identifier.length !== undefined) {\r\n                identifier = this.getIdentifier(resource?.identifier[0]);\r\n              } else {\r\n                identifier = this.getIdentifier(resource?.identifier);\r\n              }\r\n              // @ts-ignore\r\n              entry.request = {\r\n                method : 'PUT',\r\n                url: resource?.resourceType + '?identifier=' + identifier\r\n              };\r\n              newBundle.entry?.push(entry);\r\n          } else {\r\n            // remove resource\r\n          }\r\n\r\n      }\r\n      if (practitionerRole !== '') {\r\n        console.log(practitionerRole);\r\n        for (const entry of bundle.entry) {\r\n          if (entry.fullUrl === practitionerRole) {\r\n            const resource = entry.resource as DomainResource;\r\n\r\n            if (resource.resourceType === 'PractitionerRole') {\r\n                // @ts-ignore\r\n              task.requester.display = (resource as PractitionerRole).practitioner.display;\r\n                // @ts-ignore\r\n              if (task.requester.display === undefined) {\r\n                  // @ts-ignore\r\n                  task.requester.display = (resource as PractitionerRole).identifier[0].value;\r\n                }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      console.log(task);\r\n      // @ts-ignore\r\n      const entry: BundleEntry = {\r\n        resource : task,\r\n        request : {\r\n          method : 'PUT',\r\n          url: 'Task?identifier=' + this.getIdentifier(task.identifier[0])\r\n        }\r\n      };\r\n      if (prescriptionorder) {\r\n        newBundle.entry?.push(entry);\r\n      }\r\n      console.log(newBundle);\r\n      this.http.post(environment.nhsd, JSON.stringify(newBundle), { headers: this.getHeaders() }).subscribe(\r\n          (result) => {\r\n            console.log('done post to hapi');\r\n            console.log(result);\r\n            this.medicationChange.emit({});\r\n          }\r\n      );\r\n    } else {\r\n    }\r\n  }\r\n\r\n\r\n  getHeaders(): HttpHeaders {\r\n\r\n    let headers = new HttpHeaders(\r\n    );\r\n\r\n    headers = headers.append('Content-Type', 'application/fhir+json');\r\n    headers = headers.append('Accept', 'application/fhir+json');\r\n    return headers;\r\n  }\r\n\r\n  getIdentifier(identifier: Identifier): string {\r\n    if (identifier.system !== undefined) {\r\n      return identifier.system + '|' + identifier.value;\r\n    } else {\r\n      return <string>identifier.value;\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {Task} from 'fhir/r4';\r\nimport {DatePipe} from \"@angular/common\";\r\nimport {FhirService} from \"../service/FhirService\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {TdDialogService} from \"@covalent/core/dialogs\";\r\n\r\n@Component({\r\n  selector: 'app-gp-diary',\r\n  templateUrl: './gp-diary.component.html',\r\n  styleUrls: ['./gp-diary.component.scss']\r\n})\r\nexport class GpDiaryComponent implements OnInit {\r\n\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n    displayedColumns: string[] = ['when', 'status', 'reason', 'notes'];\r\n\r\n    dataSource: any;\r\n    data: Task[] = [];\r\n\r\n\r\n  constructor(private fhir: FhirService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n     this.dataSource = new MatTableDataSource <any>(this.data);\r\n     this.fhir.queryTasks();\r\n     this.fhir.taskChange.subscribe(() => {\r\n          this.dataSource = new MatTableDataSource(this.fhir.getTasks());\r\n      });\r\n  }\r\n  diary(): void {\r\n      const matDialogRef = this._dialogService.openPrompt({\r\n          title: 'Diary Entry (FHIR Task)',\r\n          message: 'Use this to add Tasks (Diary Entries) to GP workflow',\r\n          value: 'Asthma Medication Review () - Had an asthma attack and LTH ED advised my asthma medication needed reviewing.',\r\n          cancelButton: 'Cancel',\r\n          acceptButton: 'Ok',\r\n      });\r\n      matDialogRef.afterClosed().subscribe(result => {\r\n          console.log(matDialogRef.componentInstance.value);\r\n      });\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header><h2>GP Diary Entries (FHIR Task)</h2>\r\n        </mat-card-header>\r\n    <button mat-fab aria-label=\"Example icon button with a heart icon\" (click)=\"diary()\">\r\n        <mat-icon>note_add</mat-icon>\r\n    </button>\r\n    <table mat-table [dataSource]=\"dataSource\"  width=\"100%\">\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"medications\">\r\n            <th mat-header-cell *matHeaderCellDef> Medications </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.input\" let-i=\"index\" >\r\n                        <li>{{item.valueReference.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"pharmacy\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.owner?.identifier.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"requester\">\r\n            <th mat-header-cell *matHeaderCellDef> Requester </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.requester.display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authored\">\r\n            <th mat-header-cell *matHeaderCellDef> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"when\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> When </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.executionPeriod.start, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"reason\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"240\"> Reason </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.reasonCode.coding[0].display }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"notes\">\r\n            <th mat-header-cell *matHeaderCellDef> Notes </th>\r\n            <td mat-cell *matCellDef=\"let element\">  </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"order_number\">\r\n            <th mat-header-cell *matHeaderCellDef > Order No. </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.identifier[0].value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"return_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"warn\" *ngIf=\"element.status == 'accepted'\" mat-icon-button><mat-icon>remove_shopping_cart</mat-icon>Cancel</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"view_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> View Order  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button routerLink=\"/details/123453-ABCDFE-12345\" ><mat-icon>inventory</mat-icon>View Details</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Track Package  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button routerLink=\"/details/123453-ABCDFE-12345\" ><mat-icon>local_shipping</mat-icon>Tracking</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n</mat-card>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {MainComponent} from './main/main.component';\r\nimport {OrdersComponent} from './orders/orders.component';\r\nimport {CallbackComponent} from './callback/callback.component';\r\nimport {AuthGuard} from './service/auth-guard';\r\nimport {LoginComponent} from './login/login.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', canActivate: [AuthGuard], component: MainComponent,\r\n    children : [\r\n      {\r\n        path: '', component: OrdersComponent\r\n      }]},\r\n  {  path: 'callback', component : CallbackComponent},\r\n  {  path: 'login', component : LoginComponent}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {environment} from '../../environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  constructor() { }\r\n  callback = document.baseURI + 'callback';\r\n\r\n\r\n  ngOnInit(): void {\r\n    window.location.href = environment.oauth2.auth + '?client_id=' + environment.oauth2.client_id +\r\n        '&response_type=code&redirect_uri=' + this.callback + '&state=123';\r\n  }\r\n\r\n}\r\n","Redirecting to login\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-main',\r\n  templateUrl: './main.component.html',\r\n  styleUrls: ['./main.component.scss']\r\n})\r\nexport class MainComponent implements OnInit {\r\n\r\n  opened = false;\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<mat-menu #menu=\"matMenu\">\r\n    <button mat-menu-item routerLink=\"/order\"><mat-icon>shopping_basket</mat-icon>My Tasks</button>\r\n    <button mat-menu-item routerLink=\"/search\"><mat-icon>add_shopping_cart</mat-icon>Search and Add Tasks</button>\r\n    <button mat-menu-item routerLink=\"/refill\"><mat-icon>reorder</mat-icon>Reorder Medications</button>\r\n</mat-menu>\r\n<mat-menu #dosmenu=\"matMenu\">\r\n    <button mat-menu-item routerLink=\"/patient\"><mat-icon>person</mat-icon>Patient</button>\r\n    <button mat-menu-item routerLink=\"/pharmacy\"><mat-icon>store</mat-icon>Pharmacy</button>\r\n</mat-menu>\r\n<td-layout class=\"layout-nav-demo\" sidenavWidth=\"280px\">\r\n    <td-navigation-drawer\r\n            flex\r\n            sidenavTitle=\"Menu\" >\r\n        <mat-list>\r\n        </mat-list>\r\n        <span>\r\n    </span>\r\n    </td-navigation-drawer>\r\n    <td-layout-nav-list navigationRoute=\"/\" mode=\"side\" [opened]=opened>\r\n\r\n        <div td-sidenav-content>\r\n\r\n\r\n        </div>\r\n        <div td-toolbar-content layout=\"row\" layout-align=\"start center\" flex>\r\n\r\n           <!-- <button mat-icon-button td-menu-button tdLayoutToggle>\r\n                <mat-icon>menu</mat-icon>\r\n            </button>\r\n-->\r\n            <span>Codename: Danube</span>\r\n            <span flex></span>\r\n\r\n           <!-- <button mat-icon-button [matMenuTriggerFor]=\"dosmenu\" matTooltip=\"Directory Services\"><mat-icon>search</mat-icon><mat-icon>arrow_drop_down</mat-icon></button>\r\n-->\r\n            <button mat-button  matTooltip=\"Orders\"><mat-icon>add_shopping_cart</mat-icon>Basket</button>\r\n\r\n        </div>\r\n        <router-outlet></router-outlet>\r\n    </td-layout-nav-list>\r\n</td-layout>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {FhirService} from '../service/FhirService';\r\nimport {MedicationRequest} from 'fhir/r4';\r\nimport {DatePipe} from '@angular/common';\r\nimport {MatDialog, MatDialogConfig} from \"@angular/material/dialog\";\r\nimport {TdDialogService, TdPromptDialogComponent} from \"@covalent/core/dialogs\";\r\n\r\n@Component({\r\n  selector: 'app-prescription-refill',\r\n  templateUrl: './prescription-refill.component.html',\r\n  styleUrls: ['./prescription-refill.component.scss']\r\n})\r\nexport class PrescriptionRefillComponent implements OnInit {\r\n\r\n\r\n\r\n    displayedColumns: string[] = ['authored', 'status', 'name',  'courseOfTherapy',  'quantity', 'unit', 'reorder_medication'];\r\n\r\n    dataSource: any;\r\n\r\n    data: MedicationRequest[] =  [];\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n\r\n\r\n  constructor(private fhir: FhirService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n      this.dataSource = new MatTableDataSource <any>(this.data);\r\n      this.fhir.queryMedicationRequests();\r\n      this.fhir.medicationChange.subscribe(() => {\r\n         this.dataSource = new MatTableDataSource(this.fhir.getMedicationRequests());\r\n      });\r\n  }\r\n  refill(resource: any): void {\r\n\r\n      const matDialogRef = this._dialogService.openPrompt({\r\n          title: 'Re-Order (FHIR Task)',\r\n          message: 'Why do you wish to re-order ' + resource?.medicationCodeableConcept?.coding[0].display,\r\n          value: '',\r\n          cancelButton: 'Cancel',\r\n          acceptButton: 'Ok',\r\n      });\r\n      matDialogRef.afterClosed().subscribe(result => {\r\n          console.log(matDialogRef.componentInstance.value);\r\n      });\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header><h2>GP Medication Record (FHIR MedicationRequest)</h2></mat-card-header>\r\n    <table mat-table [dataSource]=\"dataSource\"  width=\"100%\">\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <!-- Position Column -->\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.medicationCodeableConcept.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}}  </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authored\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy') }} </td>\r\n        </ng-container>\r\n\r\n        <!-- Weight Column -->\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.value}} </td>\r\n        </ng-container>\r\n\r\n\r\n        <ng-container matColumnDef=\"courseOfTherapy\">\r\n            <th mat-header-cell *matHeaderCellDef> Type </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.courseOfTherapyType.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"reorder_medication\">\r\n            <th mat-header-cell *matHeaderCellDef> Reorder </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button (click)=\"refill(element)\"><mat-icon>add_shopping_cart</mat-icon>Reorder</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n\r\n</mat-card>\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}