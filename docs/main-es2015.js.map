{"version":3,"sources":["./src/app/tracking/tracking.component.ts","./src/app/tracking/tracking.component.html","./src/app/prescription-order-detail/prescription-order-detail.component.ts","./src/app/prescription-order-detail/prescription-order-detail.component.html","./src/app/orders/orders.component.ts","./src/app/orders/orders.component.html","./src/app/service/auth.service.ts","./src/app/eps-orders/prescription-orders.component.ts","./src/app/eps-orders/prescription-orders.component.html","./src/environments/environment.ts","./src/app/callback/callback.component.ts","./src/app/callback/callback.component.html","./node_modules/moment/locale sync ^\\.\\/.*$","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/medications/medications.component.ts","./src/app/medications/medications.component.html","./src/app/service/FhirService.ts","./src/app/diary-entry/diary-entry.component.ts","./src/app/diary-entry/diary-entry.component.html","./src/app/service/auth-guard.ts","./src/app/service/nhsd.service.ts","./src/app/gp-diary/gp-diary.component.ts","./src/app/gp-diary/gp-diary.component.html","./src/app/app-routing.module.ts","./src/app/login/login.component.ts","./src/app/login/login.component.html","./src/app/main/main.component.ts","./src/app/main/main.component.html","./src/app/gp-prescriptions/prescription-refill.component.ts","./src/app/gp-prescriptions/prescription-refill.component.html","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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AgB;QACrB,SAAI,GAAJ,IAAI,CAAa;QACjB,WAAM,GAAN,MAAM,CAAQ;QAE1B,aAAQ,GAAG,EAAE,CAAE;IAFe,CAAC;IAMvC,mCAAmC;IACnC,QAAQ;QAEN,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAC3B,GAAG,EAAE;YACH,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QACjC,CAAC,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YAC1C,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACpB,MAAM,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAChC,mCAAmC;YACnC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;IAEL,CAAC;;kFAzBU,iBAAiB;iGAAjB,iBAAiB;QCT9B,0EACA;;6FDQa,iBAAiB;cAL7B,uDAAS;eAAC;gBACT,QAAQ,EAAE,cAAc;gBACxB,WAAW,EAAE,2BAA2B;gBACxC,SAAS,EAAE,CAAC,0BAA0B,CAAC;aACxC;;;;;;;;;;;;;AERD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2B;;;;;;;;;;;;ACnSA;AAAA;AAAA;AAAA;AAA0C;;;AAOnC,MAAM,YAAY;IALzB;QAME,UAAK,GAAG,KAAK,CAAC;KACf;;wEAFY,YAAY;4FAAZ,YAAY;QCPzB,2EAA+B;;6FDOlB,YAAY;cALxB,uDAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,WAAW,EAAE,sBAAsB;gBACnC,SAAS,EAAE,CAAC,sBAAsB,CAAC;aACpC;;;;;;;;;;;;;;AEND;AAAA;AAAA;AAAA;AAA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","file":"main-es2015.js","sourcesContent":["import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-tracking',\r\n  templateUrl: './tracking.component.html',\r\n  styleUrls: ['./tracking.component.scss']\r\n})\r\nexport class TrackingComponent implements OnInit {\r\n\r\n  @Output() closed: EventEmitter<void> = new EventEmitter();\r\n\r\n  basicFlavoredMarkdown: string = `\r\n   ## GP FHIR MedicationRequests\r\n\r\n   Some GP suppliers have patient facing services with the concept of tracking. This is centred around the FP10 and includes:\r\n   - Patient asking for a refill\r\n   - GP authorizing refill\r\n   - Patient is informed the FP10 is ready for collection.\r\n   \r\n   ## Pharmacy FHIR MedicationDispense\r\n   \r\n   This is centred around the delivery of the medication and includes:\r\n   - medication is ready for collection\r\n   - medication has been dispatched.\r\n   \r\n   ## Notes\r\n   \r\n   In both cases these medication fulfilment tasks appear to be decoupled from the clinical medicinal FHIR resources. \r\n   \r\n   They are seperate atomic actions.\r\n `;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  ok(event: any): void {\r\n      this.closed.emit();\r\n  }\r\n\r\n}\r\n","<td-window-dialog\r\n        [title]=\"'Tracking (FHIR Task)'\"\r\n        [toolbarColor]=\"'accent'\"\r\n        (close)=\"closed.emit()\"\r\n>\r\n    <mat-card>\r\n        <td-flavored-markdown>{{ basicFlavoredMarkdown }}</td-flavored-markdown>\r\n        <mat-card-actions>\r\n            <button mat-raised-button class=\"text-upper\" (click)=\"closed.emit()\">\r\n                Cancel\r\n            </button>\r\n            <button mat-raised-button class=\"text-upper\" (click)=\"ok($event)\">\r\n                Ok\r\n            </button>\r\n        </mat-card-actions>\r\n    </mat-card>\r\n</td-window-dialog>\r\n","import {Component, Inject, OnInit, ViewContainerRef} from '@angular/core';\r\nimport {MatTableDataSource} from \"@angular/material/table\";\r\nimport {TdDialogService} from \"@covalent/core/dialogs\";\r\nimport {MedicationDispense, MedicationRequest, Task} from 'fhir/r4';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {NhsdService} from \"../service/nhsd.service\";\r\nimport {DatePipe} from \"@angular/common\";\r\n\r\n@Component({\r\n  selector: 'app-prescription-order-detail',\r\n  templateUrl: './prescription-order-detail.component.html',\r\n  styleUrls: ['./prescription-order-detail.component.scss']\r\n})\r\nexport class PrescriptionOrderDetailComponent implements OnInit {\r\n\r\n\r\n    displayedColumns: string[] = ['authored', 'name', 'dosage', 'quantity', 'unit'];\r\n\r\n    displayedDispenseColumns: string[] = ['prepared', 'performer', 'name', 'quantity', 'unit'];\r\n\r\n    dataSource : any;\r\n    dispenseDataSource : any;\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n\r\n    prescription: MedicationRequest[] =  [\r\n    ]\r\n\r\n    dispense: MedicationDispense[] =  [\r\n\r\n                ]\r\n    closed: any;\r\n\r\n  constructor(private _dialogService: TdDialogService,\r\n              private nhsd: NhsdService,\r\n              private _viewContainerRef: ViewContainerRef,\r\n              @Inject(MAT_DIALOG_DATA) public task: any\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n      this.dataSource = new MatTableDataSource<any>(this.prescription);\r\n      this.dispenseDataSource = new MatTableDataSource<any>(this.dispense);\r\n\r\n      this.nhsd.medicationRequest.subscribe((medicationRequest: MedicationRequest) => {\r\n\r\n          this.prescription.push(medicationRequest);\r\n          this.dataSource = new MatTableDataSource<any>(this.prescription);\r\n      });\r\n      this.nhsd.medicationDispense.subscribe( (medicationDispense: MedicationDispense) => {\r\n          console.log(medicationDispense);\r\n          this.dispense.push(medicationDispense);\r\n          this.dispenseDataSource= new MatTableDataSource<any>(this.dispense);\r\n      })\r\n      const nTask: Task = this.task.resource;\r\n      if (nTask.input !== undefined && nTask.input.length>0) {\r\n          for (const taskInput of nTask.input) {\r\n              if (taskInput.valueReference !== undefined && taskInput.valueReference.reference !== undefined) {\r\n                  console.log(taskInput.valueReference.display)\r\n                  this.nhsd.getMedicationRequest(taskInput.valueReference.reference);\r\n                  this.nhsd.getMedicationDispense(taskInput.valueReference.reference);\r\n              }\r\n          }\r\n      }\r\n  }\r\n\r\n}\r\n","\r\n<mat-dialog-content>\r\n    <h2>Medication Requests</h2>\r\n<table mat-table [dataSource]=\"dataSource\" >\r\n\r\n        <ng-container matColumnDef=\"authored\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n    <ng-container matColumnDef=\"dosage\">\r\n        <th mat-header-cell *matHeaderCellDef [style.width.px]=\"300\"> Dose </th>\r\n        <td mat-cell *matCellDef=\"let element\"> {{element.dosageInstruction[0].text}} </td>\r\n    </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"300\"> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.medicationCodeableConcept.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n\r\n\r\n    <h2>Dispensing History</h2>\r\n\r\n    <table mat-table [dataSource]=\"dispenseDataSource\">\r\n\r\n        <ng-container matColumnDef=\"prepared\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"140\"> Prepared </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.whenPrepared, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"performer\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.performer\" let-i=\"index\" >\r\n                        <li>{{item.actor.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.medicationCodeableConcept.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.quantity.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"cancel_dispense\">\r\n            <th mat-header-cell *matHeaderCellDef> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button mat-icon-button matTooltip=\"This is the ETPWithdrawal interaction. Does not map well to FHIR \"><mat-icon>assignment_return</mat-icon>Cancel Dispense</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedDispenseColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedDispenseColumns;\"></tr>\r\n    </table>\r\n</mat-dialog-content>\r\n<mat-dialog-actions>\r\n    <button mat-button mat-dialog-close>Cancel</button>\r\n    <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->\r\n</mat-dialog-actions>\r\n\r\n\r\n\r\n\r\n","import {Component, EventEmitter, OnInit} from '@angular/core';\r\nimport {Bundle, OperationOutcome} from 'fhir/r4';\r\nimport {NhsdService} from '../service/nhsd.service';\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {TdDialogService} from \"@covalent/core/dialogs\";\r\n\r\n\r\n@Component({\r\n  selector: 'app-orders',\r\n  templateUrl: './orders.component.html',\r\n  styleUrls: ['./orders.component.scss']\r\n})\r\nexport class OrdersComponent implements OnInit {\r\n\r\n  files: File | FileList | undefined;\r\n  disabled = false;\r\n\r\n  constructor(\r\n      private nhsd: NhsdService,\r\n      private dialog: MatDialog,\r\n      private _dialogService: TdDialogService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.nhsd.error.subscribe(\r\n        (error: OperationOutcome) => {\r\n          console.log(error);\r\n           const operationOutcome = error as OperationOutcome;\r\n           console.log(operationOutcome.issue[0].details?.text);\r\n          // @ts-ignore\r\n            const msg :string = operationOutcome.issue[0].details?.text;\r\n          // @ts-ignore\r\n            const matDialogRef = this._dialogService.openAlert({\r\n            title: 'Error',\r\n            message: msg\r\n          });\r\n          matDialogRef.afterClosed().subscribe(result => {\r\n            //console.log(matDialogRef.componentInstance.value);\r\n          });\r\n        }\r\n    )\r\n  }\r\n\r\n  // https://stackoverflow.com/questions/40214772/file-upload-in-angular\r\n\r\n  selectEvent(files: FileList | File): void {\r\n    if (files instanceof FileList) {\r\n      console.log('is filelist');\r\n    } else if (files instanceof File) {\r\n      console.log('is file');\r\n      const file: File = files;\r\n      const fileReader: FileReader = new FileReader();\r\n      // tslint:disable-next-line:only-arrow-functions typedef\r\n      fileReader.onloadend = (e) => {\r\n        if (typeof fileReader.result === 'string') {\r\n          const bundle = JSON.parse(fileReader.result) as Bundle;\r\n          this.nhsd.convertToTransaction(bundle);\r\n        }\r\n      };\r\n      fileReader.readAsText(file);\r\n    } else {\r\n      console.log('not a file type');\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<mat-card>\r\n   <!-- <h2>COVID-19 Vaccinations History</h2>\r\n    <br/> -->\r\n\r\n\r\n    <app-prescription-orders></app-prescription-orders>\r\n    <app-gp-diary></app-gp-diary>\r\n\r\n\r\n    <br />\r\n    <div>\r\n\r\n        <td-file-input [(ngModel)]=\"files\" color=\"primary\" (select)=\"selectEvent($event)\"\r\n                       accept=\".json,.xml\">\r\n            <mat-icon>attach_file</mat-icon><span>Choose a FHIR Bundle file...</span>\r\n        </td-file-input>\r\n\r\n    </div>\r\n</mat-card>\r\n","\r\n\r\nimport {environment} from '../../environments/environment';\r\n\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {EventEmitter, Injectable} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {JwtHelperService} from '@auth0/angular-jwt';\r\n\r\n\r\n\r\nclass Oauth2token {\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n    private smartToken: Oauth2token | undefined;\r\n\r\n    private accessToken = undefined;\r\n\r\n    tokenChange: EventEmitter<Oauth2token> = new EventEmitter();\r\n\r\n   public auth = false;\r\n\r\n  constructor(\r\n             private router: Router,\r\n             private http: HttpClient\r\n              ) {\r\n\r\n  }\r\n\r\n    performGetAccessToken(authCode: string | null): any {\r\n\r\n\r\n    // https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-cis2-combined-authentication-and-authorisation\r\n\r\n    const bearerToken = '';\r\n    // 'Basic ' + btoa(environment.oauth2.client_id + ':' + environment.oauth2.client_secret);\r\n    const headers = new HttpHeaders( { 'Content-Type': 'application/x-www-form-urlencoded'});\r\n\r\n    const url = environment.oauth2.token;\r\n\r\n\r\n    const urlParams = new URLSearchParams(\r\n            { grant_type: 'authorization_code'});\r\n\r\n    // urlParams.append('client_id', environment.oauth2.client_id),\r\n    // urlParams.append(  'client_secret', environment.oauth2.client_secret);\r\n    urlParams.append(  'redirect_uri', document.baseURI + 'callback');\r\n    if (typeof authCode === 'string') {\r\n        urlParams.append('code', authCode);\r\n    }\r\n\r\n    this.postAny(url, urlParams.toString(),  headers  ).subscribe( (token: any) => {\r\n        // console.log(response);\r\n        this.smartToken = token;\r\n        console.log('OAuth2Token : ' + token);\r\n        this.setAccessToken(token);\r\n\r\n        }\r\n      , (error: any) => {\r\n        console.log(error);\r\n      }\r\n      , () => {\r\n        // Emit event\r\n      }\r\n    );\r\n  }\r\n\r\n    // tslint:disable-next-line:typedef\r\n    public postAny(url: string | null, body: string, httpHeaders: HttpHeaders) {\r\n        return this.http.post<any>(url as string, body, {headers: httpHeaders});\r\n    }\r\n\r\n    public setAccessToken(token: { expires_at: any; expires_in: number; access_token: any; }): any {\r\n        // tslint:disable-next-line:new-parens\r\n        const date = new Date;\r\n        // Create an expires at ..... don't know when we got the token\r\n        token.expires_at = Math.round((new Date().valueOf()) / 1000) + token.expires_in;\r\n        localStorage.setItem('nhsdToken', JSON.stringify(token));\r\n        this.accessToken = token.access_token;\r\n        this.tokenChange.emit(token);\r\n    }\r\n    public hasAccessToken(): boolean {\r\n        return this.getAccessToken() !== undefined;\r\n    }\r\n\r\n    public getAccessToken(): any {\r\n        if (localStorage.getItem('nhsdToken') !== undefined) {\r\n            const token: any = JSON.parse(localStorage.getItem('nhsdToken') as any);\r\n            const helper = new JwtHelperService();\r\n            if (this.isTokenExpired(token)) {\r\n\r\n                console.log('withings Token expired');\r\n                this.accessToken = undefined;\r\n                //  this.getRefreshToken();\r\n                return undefined;\r\n            }\r\n            if (token !== undefined) {\r\n                this.accessToken = token.access_token;\r\n                return this.accessToken;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n\r\n    private deleteAccessToken(): any {\r\n        this.accessToken = undefined;\r\n        localStorage.removeItem('nhsdToken');\r\n    }\r\n\r\n    private getTokenExpirationDate(\r\n        decoded: any\r\n    ): Date | null {\r\n\r\n        if (!decoded || !decoded.hasOwnProperty('expires_at')) {\r\n            // Invalid format\r\n            localStorage.removeItem('nhsdToken');\r\n            return null;\r\n        }\r\n\r\n        const date = new Date(0);\r\n        date.setUTCSeconds(decoded.expires_at);\r\n\r\n        return date;\r\n    }\r\n\r\n    private isTokenExpired(\r\n        token: any,\r\n        offsetSeconds?: number\r\n    ): boolean {\r\n        if (!token || token === '') {\r\n            return true;\r\n        }\r\n        const date = this.getTokenExpirationDate(token);\r\n        offsetSeconds = offsetSeconds || 0;\r\n\r\n        console.log('nhsd token expiry date ' + date);\r\n        if (date === null) {\r\n            return false;\r\n        }\r\n        return !(date.valueOf() > new Date().valueOf() + offsetSeconds * 1000);\r\n    }\r\n}\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {MatDialog,MatDialogConfig} from '@angular/material/dialog';\r\nimport {NhsdService} from '../service/nhsd.service';\r\nimport {Task} from 'fhir/r4';\r\nimport {DatePipe} from \"@angular/common\";\r\nimport {PrescriptionOrderDetailComponent} from \"../prescription-order-detail/prescription-order-detail.component\";\r\nimport {IDraggableRefs, TdDialogService} from \"@covalent/core/dialogs\";\r\nimport {TrackingComponent} from \"../tracking/tracking.component\";\r\nimport {MatSort} from \"@angular/material/sort\";\r\n\r\n@Component({\r\n  selector: 'app-prescription-orders',\r\n  templateUrl: './prescription-orders.component.html',\r\n  styleUrls: ['./prescription-orders.component.scss']\r\n})\r\nexport class PrescriptionOrdersComponent implements OnInit {\r\n\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n\r\n    displayedColumns: string[] = ['authoredOn', 'status', 'requester', 'pharmacy', 'medications',\r\n        'order_number',  'view_order', 'track_order'];\r\n\r\n    dataSource: any;\r\n    data: Task[] = [];\r\n    @ViewChild(MatSort) sort: MatSort | undefined;\r\n\r\n\r\n  constructor(private hapi: NhsdService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n     this.dataSource = new MatTableDataSource <any>(this.data);\r\n     this.hapi.queryTasks();\r\n     this.hapi.taskChange.subscribe(() => {\r\n         this.data = this.hapi.getTasks();\r\n         this.dataSource = new MatTableDataSource(this.data);\r\n         this.dataSource.sort = this.sort;\r\n      });\r\n  }\r\n\r\n  view(resource: any): void {\r\n      const dialogConfig = new MatDialogConfig();\r\n\r\n      dialogConfig.disableClose = true;\r\n      dialogConfig.autoFocus = true;\r\n      dialogConfig.data = {\r\n          id: 1,\r\n          resource: resource\r\n      };\r\n      this.dialog.open( PrescriptionOrderDetailComponent, dialogConfig);\r\n\r\n  }\r\n\r\n    tracking(event: any): void {\r\n        const {\r\n            matDialogRef,\r\n            dragRefSubject,\r\n        }: IDraggableRefs<TrackingComponent> = this._dialogService.openDraggable({\r\n            component: TrackingComponent,\r\n            dragHandleSelectors: ['mat-toolbar'],\r\n            config: {\r\n                panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n            },\r\n        });\r\n\r\n        matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n    }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header><h2>EPS Prescription Orders (FHIR Task)</h2>\r\n\r\n    </mat-card-header>\r\n    <table mat-table   matSort\r\n           matSortActive=\"authoredOn\" matSortDirection=\"desc\"\r\n           [dataSource]=\"dataSource\" width=\"100%\" >\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"80\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"medications\">\r\n            <th mat-header-cell *matHeaderCellDef> Medications </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.input\" let-i=\"index\" >\r\n                        <li>{{item.valueReference.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"pharmacy\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.owner?.identifier.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"requester\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Requester </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.requester.display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authoredOn\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"order_number\">\r\n            <th mat-header-cell *matHeaderCellDef > Order No. </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.identifier[0].value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"return_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"warn\" *ngIf=\"element.status == 'accepted'\" mat-icon-button><mat-icon>remove_shopping_cart</mat-icon>Cancel</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"view_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Details  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button matTooltip=\"Prescription Order Details\" (click)=\"view(element)\" ><mat-icon>inventory</mat-icon></button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Tracking  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" matTooltip=\"Tracking\" mat-icon-button ><mat-icon (click)=\"tracking($event)\"> local_shipping</mat-icon></button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n</mat-card>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  oauth2 : {\r\n    token : 'https://int.api.service.nhs.uk/oauth2-no-smartcard/token',\r\n    auth : 'https://int.api.service.nhs.uk/oauth2-no-smartcard/authorize',\r\n    cookie_domain : 'localhost',\r\n    logonUrl: 'http://localhost:4200/ccri-logon'\r\n  },\r\n  virtually: 'https://test-emis.virtually.healthcare/R4',\r\n  virtuallyt: 'http://127.0.0.1:8180/R4',\r\n  nhsd: 'https://server.fire.ly/r4',\r\n  hapibase: 'http://hapi.fhir.org/baseR4',\r\n  firelybase : 'https://server.fire.ly/r4'\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {AuthService} from '../service/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-callback',\r\n  templateUrl: './callback.component.html',\r\n  styleUrls: ['./callback.component.css']\r\n})\r\nexport class CallbackComponent implements OnInit {\r\n\r\n  constructor(private route: ActivatedRoute,\r\n              private auth: AuthService,\r\n              private router: Router) { }\r\n\r\n  private authCode = '' ;\r\n\r\n  subOAuth2: any;\r\n\r\n  // tslint:disable-next-line:typedef\r\n  ngOnInit() {\r\n\r\n    this.auth.tokenChange.subscribe(\r\n        () => {\r\n          this.router.navigateByUrl('/');\r\n        }\r\n    );\r\n    this.route.queryParamMap.subscribe(params => {\r\n      console.log(params);\r\n      const code = params.get('code');\r\n      // var state = params.get('state');\r\n      this.auth.performGetAccessToken(code);\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","callback done\r\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn-bd\": \"loYQ\",\n\t\"./bn-bd.js\": \"loYQ\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-mx\": \"tbfe\",\n\t\"./es-mx.js\": \"tbfe\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'phr';\r\n}\r\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport {CovalentDynamicFormsModule} from \"@covalent/dynamic-forms\";\r\nimport {CovalentLayoutModule} from \"@covalent/core/layout\";\r\nimport {CovalentStepsModule} from \"@covalent/core/steps\";\r\nimport {CovalentHighlightModule} from \"@covalent/highlight\";\r\nimport {CovalentMarkdownModule} from \"@covalent/markdown\";\r\nimport {CovalentBaseEchartsModule} from \"@covalent/echarts/base\";\r\nimport {CovalentHttpModule} from \"@covalent/http\";\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport {MainComponent} from \"./main/main.component\";\r\nimport {MatChipsModule} from '@angular/material/chips';\r\nimport {MatTooltipModule} from '@angular/material/tooltip';\r\nimport {MatTableModule} from '@angular/material/table';\r\nimport {CovalentDataTableModule} from \"@covalent/core/data-table\";\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatIconModule} from '@angular/material/icon';\r\nimport {MatMenuModule} from '@angular/material/menu';\r\nimport {MatCardModule} from '@angular/material/card';\r\nimport {MatList, MatListModule} from '@angular/material/list';\r\nimport {MatSortModule} from '@angular/material/sort';\r\nimport {FlexLayoutModule} from '@angular/flex-layout';\r\nimport { OrdersComponent } from './orders/orders.component';\r\nimport {PrescriptionRefillComponent} from './gp-prescriptions/prescription-refill.component';\r\nimport {PrescriptionOrderDetailComponent} from './prescription-order-detail/prescription-order-detail.component';\r\nimport {CovalentMessageModule} from '@covalent/core/message';\r\nimport {PrescriptionOrdersComponent} from './eps-orders/prescription-orders.component';\r\nimport {CallbackComponent} from './callback/callback.component';\r\nimport {AuthGuard} from './service/auth-guard';\r\nimport { LoginComponent } from './login/login.component';\r\nimport {CovalentFileModule} from \"@covalent/core/file\";\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport {GpDiaryComponent} from \"./gp-diary/gp-diary.component\";\r\nimport {CovalentDialogsModule} from \"@covalent/core/dialogs\";\r\nimport {MatDialogModule} from '@angular/material/dialog';\r\nimport { DiaryEntryComponent } from './diary-entry/diary-entry.component';\r\nimport {MatFormFieldModule} from '@angular/material/form-field';\r\nimport {MatDatepickerModule} from '@angular/material/datepicker';\r\nimport {MatMomentDateModule} from '@angular/material-moment-adapter';\r\nimport {MAT_DATE_LOCALE} from '@angular/material/core';\r\nimport { TrackingComponent } from './tracking/tracking.component';\r\nimport {CovalentFlavoredMarkdownModule} from '@covalent/flavored-markdown';\r\nimport { MedicationsComponent } from './medications/medications.component';\r\nimport {CovalentMediaModule} from \"@covalent/core/media\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MainComponent,\r\n    OrdersComponent,\r\n      PrescriptionRefillComponent,\r\n      PrescriptionOrdersComponent,\r\n      GpDiaryComponent,\r\n      CallbackComponent,\r\n      LoginComponent,\r\n      PrescriptionOrderDetailComponent,\r\n      DiaryEntryComponent,\r\n      TrackingComponent,\r\n      MedicationsComponent\r\n  ],\r\n    imports: [\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        FlexLayoutModule,\r\n        BrowserAnimationsModule,\r\n\r\n        CovalentLayoutModule,\r\n        CovalentStepsModule,\r\n        // (optional) Additional Covalent Modules imports\r\n        CovalentHttpModule.forRoot(),\r\n        CovalentHighlightModule,\r\n        CovalentMarkdownModule,\r\n        CovalentDynamicFormsModule,\r\n        CovalentBaseEchartsModule,\r\n        CovalentMessageModule,\r\n        CovalentDialogsModule,\r\n        CovalentFlavoredMarkdownModule,\r\n        CovalentMediaModule,\r\n\r\n        MatIconModule,\r\n        MatButtonModule,\r\n        CovalentDataTableModule,\r\n        MatMenuModule,\r\n        MatListModule,\r\n        MatCardModule,\r\n        MatTableModule,\r\n        MatTooltipModule,\r\n        MatChipsModule,\r\n        CovalentFileModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        MatDialogModule,\r\n        MatFormFieldModule,\r\n        MatDatepickerModule,\r\n        MatMomentDateModule,\r\n        MatSortModule\r\n\r\n    ],\r\n    entryComponents: [\r\n        PrescriptionOrderDetailComponent\r\n    ],\r\n  providers: [\r\n      AuthGuard,\r\n      {provide: MAT_DATE_LOCALE\r\n          , useValue: 'en-GB'},\r\n\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\n// @ts-ignore\r\nexport class AppModule {\r\n    // nothing\r\n}","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-medications',\r\n  templateUrl: './medications.component.html',\r\n  styleUrls: ['./medications.component.scss']\r\n})\r\nexport class MedicationsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <app-prescription-refill source=\"EPS\"></app-prescription-refill>\r\n    <app-prescription-refill source=\"GP\"></app-prescription-refill>\r\n</mat-card>\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {AuthService} from './auth.service';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {Bundle, BundleEntry, MedicationRequest, Task} from 'fhir/r4';\r\nimport {environment} from '../../environments/environment';\r\nimport {v4 as uuidv4} from 'uuid';\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class FhirService {\r\n\r\n    private medicationRequests: MedicationRequest[] = [];\r\n\r\n\r\n    medicationChange: EventEmitter<any> = new EventEmitter();\r\n    constructor(private http: HttpClient,\r\n                private auth: AuthService) {\r\n    }\r\n\r\n    taskChange: EventEmitter<any> = new EventEmitter();\r\n    private tasks: Task[] = [];\r\n\r\n    public getTasks(): Task[] {\r\n        return this.tasks;\r\n    }\r\n\r\n    public queryTasks(): any {\r\n\r\n\r\n        const headers = this.getHeaders();\r\n        // tslint:disable-next-line:typedef\r\n        this.http.get(environment.virtually + '/Task?patient=137', { headers}).subscribe(\r\n            result => {\r\n                const bundle = result as Bundle;\r\n                if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n                    console.log('Task found.');\r\n                    this.tasks = [];\r\n                    for (const entry of bundle.entry) {\r\n                        this.tasks.push(entry.resource as Task);\r\n                    }\r\n                    this.taskChange.emit({});\r\n                } else {\r\n                    console.log('Task not found.');\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    public getMedicationRequests(): MedicationRequest[] {\r\n        return this.medicationRequests;\r\n    }\r\n    public queryMedicationRequests(): any {\r\n\r\n        const headers = this.getHeaders();\r\n        // tslint:disable-next-line:typedef\r\n        this.http.get(environment.virtually + '/MedicationRequest?patient=137&date=2019-01-01', { headers}).subscribe(\r\n            result => {\r\n                const bundle = result as Bundle;\r\n                if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n                    this.medicationRequests = [];\r\n                    for (const entry of bundle.entry) {\r\n                        this.medicationRequests.push(entry.resource as MedicationRequest);\r\n                    }\r\n                    this.medicationChange.emit({});\r\n                } else {\r\n                    console.log('Medication not found.');\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    public postTask(task: Task): void {\r\n        const headers = this.getHeaders();\r\n        const taskUrn = 'urn:uuid:' + uuidv4();\r\n        const bundle: Bundle = {\r\n            type: 'message',\r\n            resourceType: 'Bundle',\r\n            identifier: {\r\n                system: 'https://tools.ietf.org/html/rfc4122',\r\n                value: uuidv4()\r\n            },\r\n            entry: [\r\n                {\r\n                    fullUrl: 'urn:uuid:' + uuidv4(),\r\n                    resource: {\r\n                        resourceType: 'QuestionnaireResponse',\r\n                        extension: [\r\n                            {\r\n                                url: 'http://fhir.virtuallyhealthcare.co.uk/Location',\r\n                                valueReference: {\r\n                                    reference: 'Location/4884'\r\n                                }\r\n                            },\r\n                            {\r\n                                url: 'http://fhir.virtuallyhealthcare.co.uk/LocationType',\r\n                                extension: [\r\n                                    {\r\n                                        url: 'ID',\r\n                                        valueString: '1672871000006114'\r\n                                    },\r\n                                    {\r\n                                        url: 'GUID',\r\n                                        valueString: '357EFD4F-7912-DE6E-13B8-D3FACED28522'\r\n                                    },\r\n                                    {\r\n                                        url: 'Name',\r\n                                        valueString: 'G.P.Surgery'\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ],\r\n                        identifier: {\r\n                            system: 'urn:uuid',\r\n                            value: uuidv4()\r\n                        },\r\n                        status: 'completed',\r\n                        subject: {\r\n                            reference: 'Patient/137'\r\n                        },\r\n                        encounter: {\r\n                            display: 'Patient Facing Application'\r\n                        },\r\n                        authored: new Date().toISOString(),\r\n                        author: {\r\n                            reference: 'Practitioner/4620'\r\n                        },\r\n                        item: [\r\n                            {\r\n                                linkId: 'task',\r\n                                item: [\r\n                                    {\r\n                                        linkId: 'task-type',\r\n                                        text: 'Task',\r\n                                        answer: [\r\n                                            {\r\n                                                valueReference: {\r\n                                                    reference: taskUrn\r\n                                                }\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            ]\r\n        };\r\n        const taskEntry: BundleEntry = {\r\n            fullUrl: taskUrn,\r\n            resource: task\r\n        };\r\n        bundle.entry?.push(taskEntry);\r\n        console.log(bundle);\r\n        this.http.post(environment.virtually + '/$process-message', JSON.stringify(bundle), { headers: this.getHeaders() }).subscribe(\r\n            (result) => {\r\n                console.log('done post to virtually');\r\n                console.log(result);\r\n            },\r\n            error => {\r\n                console.log(error.error);\r\n            }\r\n        );\r\n    }\r\n\r\n    getHeaders(): HttpHeaders {\r\n\r\n        let headers = new HttpHeaders(\r\n        );\r\n\r\n        headers = headers.append('Content-Type', 'application/fhir+json');\r\n        headers = headers.append('Accept', 'application/fhir+json');\r\n        // headers = headers.append(\"Authorization\", \"Bearer \"+this.auth.getAccessToken());\r\n        return headers;\r\n    }\r\n}\r\n","import {Component, EventEmitter, Inject, OnInit, Output, ViewChild} from '@angular/core';\r\nimport {TdDialogService} from '@covalent/core/dialogs';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {MAT_DIALOG_DATA} from '@angular/material/dialog';\r\n\r\n\r\nimport {\r\n  ITdDynamicElementConfig,\r\n  TdDynamicElement,\r\n  TdDynamicFormsComponent,\r\n  TdDynamicType\r\n} from '@covalent/dynamic-forms';\r\nimport {Task} from 'fhir/r4';\r\nimport {FhirService} from '../service/FhirService';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nclass DragRef {\r\n}\r\n\r\n@Component({\r\n  selector: 'app-diary-entry',\r\n  templateUrl: './diary-entry.component.html',\r\n  styleUrls: ['./diary-entry.component.scss']\r\n})\r\nexport class DiaryEntryComponent implements OnInit {\r\n  @Output() closed: EventEmitter<void> = new EventEmitter();\r\n\r\n  @ViewChild('diaryForm', { static: true }) diaryForm: TdDynamicFormsComponent | undefined;\r\n\r\n  formElements: ITdDynamicElementConfig[] = [\r\n\r\n    {\r\n      name: 'valueLabelSelect',\r\n      hint: 'this is a SNOMED concept (procedure codes)',\r\n      label: 'diary/task reason',\r\n      type: TdDynamicElement.Select,\r\n      selections: [\r\n        { label: 'Renewal of prescription', value: '103742009' },\r\n        { label: 'Review of medication', value: '182836005' },\r\n        { label: 'Asthma medication review', value: '394720003' }\r\n      ],\r\n      default : '103742009',\r\n      required: true,\r\n    },\r\n    {\r\n      name: 'description',\r\n      label: 'Notes',\r\n      type: TdDynamicType.Text,\r\n      default: '',\r\n      required: true\r\n    },\r\n    {\r\n      name: 'dateInput',\r\n      label: 'Select a due by date',\r\n      hint: 'this is a datepicker hint',\r\n      type: TdDynamicType.Date,\r\n      default : new Date(),\r\n      required: true,\r\n      min: new Date(2021, 11, 1).setHours(0, 0, 0, 0),\r\n    },\r\n  ];\r\n  constructor(private dialogService: TdDialogService,\r\n              @Inject(DOCUMENT) private document: any,\r\n              @Inject(MAT_DIALOG_DATA) public task: Task,\r\n              private fhir: FhirService) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.task);\r\n    if (this.task.reasonCode !== undefined && this.task.reasonCode.coding !== undefined) {\r\n      this.formElements[0].default = this.task.reasonCode.coding[0].code;\r\n    }\r\n    if (this.task.note !== undefined ) {\r\n      for (const annotation of this.task.note) {\r\n        this.formElements[1].default += annotation.text + ' ';\r\n      }\r\n    }\r\n  }\r\n\r\n  ok(event: any): void {\r\n    if (this.diaryForm !== undefined && this.diaryForm.form.value.dateInput !== undefined) {\r\n\r\n      const newTask: Task = {\r\n        resourceType: 'Task',\r\n        status: 'ready',\r\n        identifier: [\r\n          {\r\n            system: 'https://tools.ietf.org/html/rfc4122',\r\n            value: uuidv4()\r\n          }\r\n        ],\r\n        intent: 'order',\r\n        code: {\r\n          coding: [\r\n            {\r\n              system: 'http://hl7.org/fhir/CodeSystem/task-code',\r\n              code: 'fulfill',\r\n              display: 'Fulfill the focal request'\r\n            }\r\n          ]\r\n        },\r\n        for: {\r\n          reference: 'Patient/137'\r\n        },\r\n        requester: {\r\n          reference: 'Practitioner/4620'\r\n        },\r\n        authoredOn: new Date().toISOString(),\r\n      };\r\n      switch (this.diaryForm.form.value.valueLabelSelect) {\r\n        case '103742009':\r\n          newTask.reasonCode = {\r\n          coding: [\r\n            {\r\n              system: 'http://snomed.info/sct',\r\n              code: '103742009',\r\n              display: 'Renewal of prescription'\r\n            }\r\n          ]\r\n        };\r\n          break;\r\n        case '182836005':\r\n          newTask.reasonCode = {\r\n            coding: [\r\n              {\r\n                system: 'http://snomed.info/sct',\r\n                code: '182836005',\r\n                display: 'Review of medication'\r\n              }\r\n            ]\r\n          };\r\n          break;\r\n        case '394720003':\r\n          newTask.reasonCode = {\r\n            coding: [\r\n              {\r\n                system: 'http://snomed.info/sct',\r\n                code: '394720003',\r\n                display: 'Asthma medication review'\r\n              }\r\n            ]\r\n          };\r\n          break;\r\n      }\r\n      if (this.diaryForm.form.value.dateInput !== undefined) {\r\n        const expDate = this.diaryForm.form.value.dateInput;\r\n        console.log(expDate.toISOString());\r\n        newTask.authoredOn = expDate.toISOString();\r\n      }\r\n      newTask.note = [\r\n        {\r\n          text: this.diaryForm.form.value.description\r\n        }\r\n      ];\r\n      console.log(newTask);\r\n      this.fhir.postTask(newTask);\r\n      this.closed.emit();\r\n    }\r\n  }\r\n\r\n}\r\n","<td-window-dialog\r\n        [title]=\"'Create Diary Entry (FHIR Task)'\"\r\n        [toolbarColor]=\"'accent'\"\r\n        (close)=\"closed.emit()\"\r\n>\r\n    <mat-card>\r\n    <td-dynamic-forms #diaryForm [elements]=\"formElements\" >\r\n\r\n    </td-dynamic-forms>\r\n\r\n        <mat-card-actions>\r\n        <button mat-raised-button class=\"text-upper\" (click)=\"closed.emit()\">\r\n            Cancel\r\n        </button>\r\n    <button mat-raised-button class=\"text-upper\" (click)=\"ok($event)\">\r\n        Ok\r\n    </button>\r\n        </mat-card-actions>\r\n    </mat-card>\r\n</td-window-dialog>\r\n","import {CanActivate, Router} from '@angular/router';\r\nimport {Injectable} from '@angular/core';\r\nimport {AuthService} from './auth.service';\r\nimport {Extension, MedicationRequest, Patient} from \"fhir/r4\";\r\n\r\n@Injectable()\r\nexport class AuthGuard  implements CanActivate {\r\n\r\n\r\n  constructor(public router: Router, private auth: AuthService) {\r\n\r\n  }\r\n  canActivate(): any {\r\n    return true;\r\n\r\n    /*\r\n    if (this.auth.hasAccessToken()) {\r\n      return true;\r\n    } else {\r\n        console.log('Auth');\r\n        this.router.navigate(['login']);\r\n        return false;\r\n    }\r\n     */\r\n  }\r\n\r\n}\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {\r\n  Bundle,\r\n  BundleEntry,\r\n  DomainResource,\r\n  Identifier,\r\n  MedicationRequest,\r\n  MessageHeader,\r\n  PractitionerRole,\r\n  Task\r\n} from 'fhir/r4';\r\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\r\nimport {environment} from \"../../environments/environment\";\r\nimport {AuthService} from \"./auth.service\";\r\nimport {MedicationDispense} from 'fhir/r4';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NhsdService {\r\n\r\n  medicationChange: EventEmitter<any> = new EventEmitter();\r\n  public medicationRequest: EventEmitter<MedicationRequest> = new EventEmitter();\r\n  public medicationDispense: EventEmitter<MedicationDispense> = new EventEmitter();\r\n  error: EventEmitter<any> = new EventEmitter();\r\n  constructor(private http: HttpClient) { }\r\n  private medicationRequests: MedicationRequest[] = [];\r\n\r\n  taskChange: EventEmitter<any> = new EventEmitter();\r\n  private tasks: Task[] = [];\r\n  public getTasks(): Task[] {\r\n    return this.tasks;\r\n  }\r\n\r\n  public getMedicationRequests(): MedicationRequest[] {\r\n    return this.medicationRequests;\r\n  }\r\n\r\n  public queryTasks(): any {\r\n\r\n\r\n    const headers = this.getHeaders();\r\n    // tslint:disable-next-line:typedef\r\n    this.http.get(environment.nhsd + '/Task?patient.identifier=9876543210', { headers}).subscribe(\r\n        result => {\r\n          const bundle = result as Bundle;\r\n          if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n            console.log('Task found.');\r\n            this.tasks = [];\r\n            for (const entry of bundle.entry) {\r\n              if (entry.resource?.resourceType === 'Task') {\r\n                this.tasks.push(entry.resource as Task);\r\n              }\r\n            }\r\n            this.taskChange.emit({});\r\n          } else {\r\n            console.log('Task not found.');\r\n          }\r\n        }\r\n    );\r\n  }\r\n\r\n  public convertToTransaction(bundle: Bundle): any {\r\n\r\n    let newBundle: Bundle = {\r\n      resourceType : 'Bundle',\r\n      type : 'transaction',\r\n      entry : []\r\n    };\r\n    let task: any = {\r\n      resourceType : 'Task',\r\n      status: 'ready',\r\n      intent: 'order',\r\n      code: {\r\n        coding: [\r\n          {\r\n            system: 'http://hl7.org/fhir/CodeSystem/task-code',\r\n            code: 'fulfill',\r\n            display: 'Fulfill the focal request'\r\n          }\r\n        ]\r\n      },\r\n      input: []\r\n    };\r\n    let prescriptionorder = false;\r\n    if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n      let practitionerRole: string | undefined = '';\r\n      for (const entry of bundle.entry) {\r\n          const resource = entry.resource as any;\r\n          if (resource?.resourceType === 'Patient') {\r\n              task.for = {\r\n                reference : entry.fullUrl\r\n              };\r\n          }\r\n        if (resource?.resourceType === 'MessageHeader' ) {\r\n          console.log('MessageHeader');\r\n          const medicationHeader = resource as MessageHeader;\r\n          if (medicationHeader.eventCoding?.code === 'prescription-order') {\r\n            prescriptionorder = true;\r\n          }\r\n        }\r\n        if (resource?.resourceType === 'MedicationDispense' ) {\r\n          console.log('MedicationDispene');\r\n          let medicationDispense = resource as MedicationDispense;\r\n          if (medicationDispense.subject?.identifier !== undefined) {\r\n            medicationDispense.subject.reference = 'Patient?identifier=' + medicationDispense.subject.identifier.system\r\n                + '|' + medicationDispense.subject.identifier.value;\r\n          }\r\n          if (medicationDispense.authorizingPrescription !== undefined && medicationDispense.authorizingPrescription.length > 0) {\r\n            for (let ident of medicationDispense.authorizingPrescription) {\r\n              if (ident.identifier !== undefined) {\r\n                ident.reference = 'MedicationRequest?identifier=' + ident.identifier.system\r\n                    + '|' + ident.identifier.value;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n          if ((resource?.resourceType === 'MedicationRequest') ) {\r\n            const medicationRequest = resource as any;\r\n            if (task.identifier === undefined) {\r\n              task.identifier = [];\r\n              task.identifier.push(medicationRequest.groupIdentifier as Identifier);\r\n            }\r\n            task.requester = medicationRequest.requester;\r\n            practitionerRole = medicationRequest.requester?.reference;\r\n            task.authoredOn = medicationRequest.authoredOn;\r\n            if (medicationRequest.dispenseRequest !== undefined && medicationRequest.dispenseRequest.performer !== undefined) {\r\n                task.owner = medicationRequest.dispenseRequest.performer;\r\n                task.status = 'requested';\r\n            }\r\n            const input = {\r\n              type: {\r\n                coding:  [\r\n                  {\r\n                    system: 'http://snomed.info/sct',\r\n                    code: '16076005',\r\n                    display: 'Prescription'\r\n                  }\r\n                ]\r\n              },\r\n              valueReference: {\r\n                type: 'MedicationRequest',\r\n                reference: entry.fullUrl,\r\n                display: medicationRequest?.medicationCodeableConcept?.coding[0].display\r\n              }\r\n            };\r\n            task.input?.push(input);\r\n          }\r\n          if (resource?.identifier !== undefined) {\r\n              let identifier = '';\r\n              if (resource?.identifier.length !== undefined) {\r\n                identifier = this.getIdentifier(resource?.identifier[0]);\r\n              } else {\r\n                identifier = this.getIdentifier(resource?.identifier);\r\n              }\r\n              // @ts-ignore\r\n              entry.request = {\r\n                method : 'PUT',\r\n                url: resource?.resourceType + '?identifier=' + identifier\r\n              };\r\n              newBundle.entry?.push(entry);\r\n          } else {\r\n            // remove resource\r\n          }\r\n\r\n      }\r\n      if (practitionerRole !== '') {\r\n        console.log(practitionerRole);\r\n        for (const entry of bundle.entry) {\r\n          if (entry.fullUrl === practitionerRole) {\r\n            const resource = entry.resource as DomainResource;\r\n\r\n            if (resource.resourceType === 'PractitionerRole') {\r\n                // @ts-ignore\r\n              task.requester.display = (resource as PractitionerRole).practitioner.display;\r\n                // @ts-ignore\r\n              if (task.requester.display === undefined) {\r\n                  // @ts-ignore\r\n                  task.requester.display = (resource as PractitionerRole).identifier[0].value;\r\n                }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n      if (prescriptionorder) {\r\n        console.log(task);\r\n        const entry: BundleEntry = {\r\n          resource : task,\r\n          request : {\r\n            method : 'PUT',\r\n            url: 'Task?identifier=' + this.getIdentifier(task.identifier[0])\r\n          }\r\n        };\r\n        newBundle.entry?.push(entry);\r\n      }\r\n      console.log(newBundle);\r\n      this.http.post(environment.nhsd, JSON.stringify(newBundle), { headers: this.getHeaders() }).subscribe(\r\n          (result) => {\r\n            console.log('done post to hapi');\r\n            console.log(result);\r\n            this.medicationChange.emit({});\r\n          },\r\n          error => {\r\n            this.error.emit(error.error);\r\n          }\r\n      );\r\n    } else {\r\n    }\r\n  }\r\n\r\n  getMedicationRequest(url: string) {\r\n    const headers = this.getHeaders();\r\n    this.http.get<any>(url, {'headers': headers}).subscribe(\r\n        medicationRequest => {\r\n          if (medicationRequest.resourceType === 'Bundle') {\r\n            console.log('Found a Bundle');\r\n            const bundle = medicationRequest as Bundle;\r\n            if (bundle.entry !== undefined && bundle.entry.length > 0) {\r\n\r\n              this.medicationRequests = [];\r\n              for (const entry of bundle.entry) {\r\n\r\n                if (entry.resource?.resourceType === 'MedicationRequest') {\r\n\r\n                  this.medicationRequests.push(entry.resource as MedicationRequest);\r\n                }\r\n              }\r\n            } else {\r\n              console.log('Medication not found.');\r\n            }\r\n            this.medicationRequest.emit(medicationRequest);\r\n          } else {\r\n            this.medicationRequest.emit(medicationRequest);\r\n          }\r\n        }\r\n    )\r\n  }\r\n  getMedicationDispense(url: string) {\r\n    const headers = this.getHeaders();\r\n    this.http.get<any>(environment.nhsd + '/MedicationDispense?prescription=' + url, {'headers': headers}).subscribe(\r\n        resource => {\r\n          const bundle: Bundle = resource as Bundle;\r\n          if (bundle.entry !== undefined) {\r\n            for (let entry of bundle.entry) {\r\n\r\n              if (entry.resource?.resourceType === 'MedicationDispense') {\r\n                this.medicationDispense.emit(entry.resource as MedicationDispense);\r\n              }\r\n            }\r\n          }\r\n        }\r\n    )\r\n  }\r\n\r\n  getHeaders(): HttpHeaders {\r\n\r\n    let headers = new HttpHeaders(\r\n    );\r\n\r\n    headers = headers.append('Content-Type', 'application/fhir+json');\r\n    headers = headers.append('Accept', 'application/fhir+json');\r\n    return headers;\r\n  }\r\n\r\n  getIdentifier(identifier: Identifier): string {\r\n    if (identifier.system !== undefined) {\r\n      return identifier.system + '|' + identifier.value;\r\n    } else {\r\n      return <string>identifier.value;\r\n    }\r\n  }\r\n}\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {Task} from 'fhir/r4';\r\nimport {DatePipe} from \"@angular/common\";\r\nimport {FhirService} from \"../service/FhirService\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {IDraggableRefs, TdDialogService} from \"@covalent/core/dialogs\";\r\nimport {DiaryEntryComponent} from \"../diary-entry/diary-entry.component\";\r\nimport {MatSort} from \"@angular/material/sort\";\r\n\r\n@Component({\r\n  selector: 'app-gp-diary',\r\n  templateUrl: './gp-diary.component.html',\r\n  styleUrls: ['./gp-diary.component.scss']\r\n})\r\nexport class GpDiaryComponent implements OnInit {\r\n\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n    displayedColumns: string[] = ['when', 'status', 'reason', 'notes'];\r\n\r\n    dataSource: any;\r\n    data: Task[] = [];\r\n\r\n    @ViewChild(MatSort) sort: MatSort | undefined;\r\n\r\n\r\n  constructor(private fhir: FhirService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n     this.dataSource = new MatTableDataSource <any>(this.data);\r\n     this.fhir.queryTasks();\r\n     this.fhir.taskChange.subscribe(() => {\r\n         this.data = this.fhir.getTasks();\r\n         this.dataSource = new MatTableDataSource(this.data);\r\n         this.dataSource.sort = this.sort;\r\n      });\r\n  }\r\n  diary(): void {\r\n      const task: Task = {\r\n          status: 'ready',\r\n          intent: 'proposal',\r\n          resourceType: 'Task',\r\n          reasonCode: {\r\n              coding: [{\r\n                  code: '182836005'\r\n              }]\r\n          }\r\n      };\r\n\r\n      const {\r\n          matDialogRef,\r\n          dragRefSubject,\r\n      }: IDraggableRefs<DiaryEntryComponent> = this._dialogService.openDraggable({\r\n          component: DiaryEntryComponent,\r\n          dragHandleSelectors: ['mat-toolbar'],\r\n          config: {\r\n              panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n              data : task\r\n          },\r\n      });\r\n\r\n      matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header layout=\"row\" layout-align=\"start center\" flex>\r\n\r\n        <h2>GP Diary Entries (FHIR Task)</h2>\r\n        <span flex></span>\r\n        <button mat-mini-fab matTooltip=\"Add diary etry/task\" aria-label=\"Example icon button with a heart icon\" (click)=\"diary()\">\r\n            <mat-icon>add_shopping_cart</mat-icon>\r\n        </button>\r\n    </mat-card-header>\r\n\r\n    <table mat-table matSort\r\n           matSortActive=\"when\" matSortDirection=\"desc\" [dataSource]=\"dataSource\"  width=\"100%\">\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"80\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"medications\">\r\n            <th mat-header-cell *matHeaderCellDef> Medications </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <ul>\r\n                    <ng-template ngFor let-item [ngForOf]=\"element.input\" let-i=\"index\" >\r\n                        <li>{{item.valueReference.display}}</li>\r\n                    </ng-template>\r\n                </ul>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"pharmacy\">\r\n            <th mat-header-cell *matHeaderCellDef> Pharmacy </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.owner?.identifier.value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"requester\">\r\n            <th mat-header-cell *matHeaderCellDef> Requester </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.requester.display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authored\">\r\n            <th mat-header-cell *matHeaderCellDef> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"when\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"120\"> When </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.executionPeriod.start, 'dd MMM yyyy HH:mm') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"reason\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"240\"> Reason </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.reasonCode.coding[0].display }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"notes\">\r\n            <th mat-header-cell *matHeaderCellDef> Notes </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n            <span *ngIf=\"element.note !== undefined\"> {{element.note[0].text}} </span></td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n        <ng-container matColumnDef=\"order_number\">\r\n            <th mat-header-cell *matHeaderCellDef > Order No. </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.identifier[0].value}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"return_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Cancel </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"warn\" *ngIf=\"element.status == 'accepted'\" mat-icon-button><mat-icon>remove_shopping_cart</mat-icon>Cancel</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"view_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> View Order  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button routerLink=\"/details/123453-ABCDFE-12345\" ><mat-icon>inventory</mat-icon>View Details</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"120\"> Track Package  </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\" mat-icon-button routerLink=\"/details/123453-ABCDFE-12345\" ><mat-icon>local_shipping</mat-icon>Tracking</button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n</mat-card>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {MainComponent} from './main/main.component';\r\nimport {OrdersComponent} from './orders/orders.component';\r\nimport {CallbackComponent} from './callback/callback.component';\r\nimport {AuthGuard} from './service/auth-guard';\r\nimport {LoginComponent} from './login/login.component';\r\nimport { MedicationsComponent } from './medications/medications.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', canActivate: [AuthGuard], component: MainComponent,\r\n    children : [\r\n      {path: '', component: OrdersComponent },\r\n      {path: 'tasks', component: OrdersComponent },\r\n      {path: 'medications', component: MedicationsComponent }\r\n        ]\r\n  },\r\n  {  path: 'callback', component : CallbackComponent},\r\n  {  path: 'login', component : LoginComponent}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {environment} from '../../environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  constructor() { }\r\n  callback = document.baseURI + 'callback';\r\n\r\n\r\n  ngOnInit(): void {\r\n    // window.location.href = environment.oauth2.auth + '?client_id=' + environment.oauth2.client_id +\r\n    //    '&response_type=code&redirect_uri=' + this.callback + '&state=123';\r\n  }\r\n\r\n}\r\n","Redirecting to login\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {TdMediaService} from \"@covalent/core/media\";\r\nimport {Router} from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-main',\r\n  templateUrl: './main.component.html',\r\n  styleUrls: ['./main.component.scss']\r\n})\r\nexport class MainComponent implements OnInit {\r\n\r\n  opened = false;\r\n  constructor(public media: TdMediaService,\r\n              private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onClick(route: string) {\r\n    this.router.navigateByUrl(route);\r\n  }\r\n\r\n}\r\n","\r\n<mat-menu #recordsMenu=\"matMenu\">\r\n    <button mat-menu-item routerLink=\"/tasks\"><mat-icon>gavel</mat-icon>Task Manager</button>\r\n    <button mat-menu-item routerLink=\"/medications\"><mat-icon>sanitizer</mat-icon>Medications</button>\r\n</mat-menu>\r\n<td-layout class=\"layout-nav-demo\" sidenavWidth=\"280px\">\r\n    <td-navigation-drawer\r\n            flex\r\n            sidenavTitle=\"Menu\" >\r\n        <mat-list>\r\n        </mat-list>\r\n        <span>\r\n    </span>\r\n    </td-navigation-drawer>\r\n    <td-layout-nav-list navigationRoute=\"/\" mode=\"side\"  [opened]=opened>\r\n\r\n        <div td-sidenav-content>\r\n            stuff\r\n        </div>\r\n        <div td-toolbar-content layout=\"row\" layout-align=\"start center\" flex>\r\n\r\n            <span>Codename: Danube</span>\r\n            <span flex></span>\r\n\r\n            <button mat-button disabled=\"true\"  matTooltip=\"Orders\"><mat-icon>add_shopping_cart</mat-icon>Basket</button>\r\n            <button mat-icon-button [matMenuTriggerFor]=\"recordsMenu\"><mat-icon>menu</mat-icon></button>\r\n        </div>\r\n\r\n\r\n        <router-outlet></router-outlet>\r\n        <td-layout-footer>\r\n            <div layout=\"row\" layout-align=\"start center\">\r\n                <span class=\"mat-caption\">Copyright &copy; 2021 Virtually Healthcare and Mayfield IS. All rights reserved</span>\r\n            </div>\r\n        </td-layout-footer>\r\n    </td-layout-nav-list>\r\n</td-layout>\r\n","import {Component, Input, OnInit, ViewChild} from '@angular/core';\r\nimport {MatTableDataSource} from '@angular/material/table';\r\nimport {FhirService} from '../service/FhirService';\r\nimport {MedicationRequest, Task} from 'fhir/r4';\r\nimport {DatePipe} from '@angular/common';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n    IDraggableRefs,\r\n    ResizableDraggableDialog,\r\n    TdDialogService,\r\n    TdPromptDialogComponent\r\n} from '@covalent/core/dialogs';\r\nimport {DiaryEntryComponent} from '../diary-entry/diary-entry.component';\r\nimport {TrackingComponent} from '../tracking/tracking.component';\r\nimport {NhsdService} from '../service/nhsd.service';\r\nimport {environment} from '../../environments/environment';\r\nimport {MatSort} from '@angular/material/sort';\r\n\r\n\r\n@Component({\r\n  selector: 'app-prescription-refill',\r\n  templateUrl: './prescription-refill.component.html',\r\n  styleUrls: ['./prescription-refill.component.scss']\r\n})\r\nexport class PrescriptionRefillComponent implements OnInit {\r\n\r\n    @Input()\r\n    source = 'GP';\r\n\r\n    @ViewChild(MatSort) sort: MatSort | undefined;\r\n\r\n    displayedColumns: string[] = ['authoredOn', 'status', 'name',  'courseOfTherapy', 'dose',  'quantity', 'reorder_medication', 'track_order'];\r\n\r\n    dataSource: any;\r\n\r\n    prescription: MedicationRequest[] =  [];\r\n\r\n    datepipe: DatePipe = new DatePipe('en-GB');\r\n\r\n\r\n  constructor(private fhir: FhirService,\r\n              private nhsd: NhsdService,\r\n              private dialog: MatDialog,\r\n              private _dialogService: TdDialogService) { }\r\n\r\n  ngOnInit(): void {\r\n      this.dataSource = new MatTableDataSource <any>(this.prescription);\r\n      if (this.source === 'GP') {\r\n          this.fhir.queryMedicationRequests();\r\n          this.fhir.medicationChange.subscribe(() => {\r\n              this.prescription = this.fhir.getMedicationRequests();\r\n              this.dataSource = new MatTableDataSource(this.prescription);\r\n              this.dataSource.sort = this.sort;\r\n          });\r\n      } else {\r\n          this.nhsd.getMedicationRequest(environment.nhsd + '/MedicationRequest?patient.identifier=9876543210');\r\n          this.nhsd.medicationRequest.subscribe(() => {\r\n              this.prescription = this.nhsd.getMedicationRequests();\r\n              this.dataSource = new MatTableDataSource(this.prescription);\r\n              this.dataSource.sort = this.sort;\r\n          });\r\n      }\r\n  }\r\n\r\n    // tslint:disable-next-line:typedef\r\n    ngAfterViewInit() {\r\n\r\n        if (this.sort !== undefined) {\r\n            this.sort.sortChange.subscribe((event: any) => {\r\n                console.log(event);\r\n            });\r\n\r\n        } else {\r\n            console.log('SORT UNDEFINED');\r\n        }\r\n    }\r\n\r\n  tracking(event: any): void {\r\n      const {\r\n          matDialogRef,\r\n          dragRefSubject,\r\n      }: IDraggableRefs<TrackingComponent> = this._dialogService.openDraggable({\r\n          component: TrackingComponent,\r\n          dragHandleSelectors: ['mat-toolbar'],\r\n          config: {\r\n              panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n          },\r\n      });\r\n\r\n      matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n  }\r\n\r\n  refill(resource: MedicationRequest): void {\r\n\r\n      const task: Task = {\r\n          status: 'ready',\r\n          intent: 'proposal',\r\n          resourceType: 'Task',\r\n          note : [],\r\n          reasonCode: {\r\n              coding: [{\r\n                  code: '103742009'\r\n              }]\r\n          }\r\n      };\r\n      if (resource.medicationCodeableConcept !== undefined\r\n          && resource.medicationCodeableConcept.coding !== undefined\r\n          && resource.medicationCodeableConcept.coding[0].display !== undefined) {\r\n          // @ts-ignore\r\n          task.note = [\r\n              {\r\n                  text: resource.medicationCodeableConcept.coding[0].display\r\n                      + ' (' +  this.datepipe.transform(resource.authoredOn, 'dd MMM yyyy') +  ')'\r\n              }\r\n          ];\r\n      }\r\n      if (this.source === 'EPS') {\r\n          task.note?.push({\r\n              text : 'EPS prescription number ' + resource.groupIdentifier?.value + ' '\r\n          });\r\n          if (resource.requester?.display !== undefined) {\r\n              task.note?.push({\r\n                  text : 'Prescriber ' + resource.requester.display\r\n              });\r\n          }\r\n      }\r\n      const {\r\n          matDialogRef,\r\n          dragRefSubject,\r\n      }: IDraggableRefs<DiaryEntryComponent> = this._dialogService.openDraggable({\r\n          component: DiaryEntryComponent,\r\n          dragHandleSelectors: ['mat-toolbar'],\r\n          config: {\r\n              panelClass: ['td-window-dialog'], // pass this class in to ensure certain css is properly added,\r\n              data : task\r\n          },\r\n      });\r\n\r\n      matDialogRef.componentInstance.closed.subscribe(() => matDialogRef.close());\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n    <mat-card-header><h2>{{source}} Medication Record (FHIR MedicationRequest)</h2></mat-card-header>\r\n    <table\r\n            matSort\r\n            matSortActive=\"status\" matSortDirection=\"asc\"\r\n            mat-table [dataSource]=\"dataSource\"  width=\"100%\">\r\n\r\n        <!--- Note that these columns can be defined in any order.\r\n              The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n        <!-- Position Column -->\r\n        <ng-container matColumnDef=\"concept\">\r\n            <th mat-header-cell *matHeaderCellDef> Medication ID </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.concept}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Name Column -->\r\n        <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"140\"> Medication Name </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.medicationCodeableConcept.coding[0].display}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.width.px]=\"80\"> Status </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.status}}  </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"authoredOn\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.width.px]=\"120\"> Authored </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{datepipe.transform(element.authoredOn, 'dd MMM yyyy') }} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"dose\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"180\"> Dose </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dosageInstruction[0].text}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"unit\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"80\"> Unit </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"quantity\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"80\"> Quantity </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{element.dispenseRequest.quantity.value}} &nbsp; {{element.dispenseRequest.quantity.unit}} </td>\r\n        </ng-container>\r\n\r\n\r\n        <ng-container matColumnDef=\"courseOfTherapy\">\r\n            <th mat-header-cell mat-sort-header *matHeaderCellDef [style.width.px]=\"40\"> Type </th>\r\n            <td mat-cell  *matCellDef=\"let element\">\r\n                <span *ngIf=\"element.courseOfTherapyType.coding[0].code.startsWith('continuous')\">\r\n                      <button color=\"accent\" mat-icon-button [matTooltip]=element.courseOfTherapyType.coding[0].display (click)=\"refill(element)\"><mat-icon>repeat</mat-icon></button> </span>\r\n                <span *ngIf=\"!element.courseOfTherapyType.coding[0].code.startsWith('continuous')\">\r\n                <button color=\"accent\"  mat-icon-button [matTooltip]=element.courseOfTherapyType.coding[0].display (click)=\"refill(element)\"><mat-icon>arrow_right_alt</mat-icon></button> </span>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <!-- Symbol Column -->\r\n\r\n        <ng-container matColumnDef=\"reorder_medication\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Reorder </th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <span *ngIf=\"source === 'EPS' || element.courseOfTherapyType.coding[0].code === 'continuous'\">\r\n                    <button color=\"accent\" mat-icon-button matTooltip=\"Reorder Medication\" (click)=\"refill(element)\"><mat-icon>add_shopping_cart</mat-icon></button>\r\n                </span>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef=\"track_order\">\r\n            <th mat-header-cell *matHeaderCellDef [style.width.px]=\"50\"> Tracking</th>\r\n            <td mat-cell *matCellDef=\"let element\">\r\n                <button color=\"accent\"  mat-icon-button matTooltip=\"Tracking\" (click)=\"tracking(element)\"><mat-icon>local_shipping</mat-icon></button>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </table>\r\n\r\n</mat-card>\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}